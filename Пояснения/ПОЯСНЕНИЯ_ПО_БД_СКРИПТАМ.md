# –ü–æ—è—Å–Ω–µ–Ω–∏—è –ø–æ —Å–∫—Ä–∏–ø—Ç–∞–º —Å–æ–∑–¥–∞–Ω–∏—è –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∞

–≠—Ç–æ—Ç –¥–æ–∫—É–º–µ–Ω—Ç —Å–æ–¥–µ—Ä–∂–∏—Ç –ø–æ–¥—Ä–æ–±–Ω—ã–µ –ø–æ—è—Å–Ω–µ–Ω–∏—è –¥–ª—è –∫–∞–∂–¥–æ–≥–æ —Ñ–∞–π–ª–∞, —Å–≤—è–∑–∞–Ω–Ω–æ–≥–æ —Å —Å–æ–∑–¥–∞–Ω–∏–µ–º –∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–æ–π –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö, –∏ –∫–∞–∂–¥–æ–≥–æ –±–ª–æ–∫–∞ –∫–æ–¥–∞ –≤–Ω—É—Ç—Ä–∏ —ç—Ç–∏—Ö —Ñ–∞–π–ª–æ–≤.

---

## üìÅ –§–∞–π–ª—ã –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –ë–î

```
practice/
‚îú‚îÄ‚îÄ create_database.py      # –°–æ–∑–¥–∞–Ω–∏–µ –ë–î –∏ –∏–º–ø–æ—Ä—Ç –¥–∞–Ω–Ω—ã—Ö –∏–∑ Excel
‚îú‚îÄ‚îÄ create_er_diagram.py    # –°–æ–∑–¥–∞–Ω–∏–µ ER-–¥–∏–∞–≥—Ä–∞–º–º—ã
‚îî‚îÄ‚îÄ production_db.sqlite    # –§–∞–π–ª –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö SQLite
```

---

## üìÑ –§–∞–π–ª: `create_database.py`

**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –°–∫—Ä–∏–ø—Ç –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ —Å–æ–∑–¥–∞–Ω–∏—è –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö SQLite, —Å–æ–∑–¥–∞–Ω–∏—è –≤—Å–µ—Ö —Ç–∞–±–ª–∏—Ü –∏ –∏–º–ø–æ—Ä—Ç–∞ –¥–∞–Ω–Ω—ã—Ö –∏–∑ Excel —Ñ–∞–π–ª–æ–≤.

### –ò–º–ø–æ—Ä—Ç—ã

```python
import sqlite3
import pandas as pd
import os
from pathlib import Path
```

**–ü–æ—è—Å–Ω–µ–Ω–∏—è:**
- **sqlite3** - –≤—Å—Ç—Ä–æ–µ–Ω–Ω–∞—è –±–∏–±–ª–∏–æ—Ç–µ–∫–∞ Python –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å SQLite –ë–î
- **pandas** - –±–∏–±–ª–∏–æ—Ç–µ–∫–∞ –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –¥–∞–Ω–Ω—ã–º–∏, –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è —á—Ç–µ–Ω–∏—è Excel —Ñ–∞–π–ª–æ–≤
- **os** - –º–æ–¥—É–ª—å –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –æ–ø–µ—Ä–∞—Ü–∏–æ–Ω–Ω–æ–π —Å–∏—Å—Ç–µ–º–æ–π (–ø—Ä–æ–≤–µ—Ä–∫–∞ —Å—É—â–µ—Å—Ç–≤–æ–≤–∞–Ω–∏—è —Ñ–∞–π–ª–æ–≤)
- **Path** - –∫–ª–∞—Å—Å –∏–∑ pathlib –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –ø—É—Ç—è–º–∏ –∫ —Ñ–∞–π–ª–∞–º (–±–æ–ª–µ–µ —É–¥–æ–±–Ω—ã–π, —á–µ–º os.path)

### –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ –ë–î

```python
DB_NAME = 'production_db.sqlite'
conn = sqlite3.connect(DB_NAME)
cursor = conn.cursor()
```

**–ü–æ—è—Å–Ω–µ–Ω–∏—è:**
- **DB_NAME** - –∏–º—è —Ñ–∞–π–ª–∞ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
  - SQLite —Ö—Ä–∞–Ω–∏—Ç –ë–î –≤ –æ–¥–Ω–æ–º —Ñ–∞–π–ª–µ
  - –ï—Å–ª–∏ —Ñ–∞–π–ª –Ω–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç, –æ–Ω –±—É–¥–µ—Ç —Å–æ–∑–¥–∞–Ω –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏
- **sqlite3.connect(DB_NAME)** - –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ –ë–î (–∏–ª–∏ —Å–æ–∑–¥–∞–Ω–∏–µ, –µ—Å–ª–∏ –Ω–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç)
  - –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç –æ–±—ä–µ–∫—Ç —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è (connection)
- **conn.cursor()** - —Å–æ–∑–¥–∞–Ω–∏–µ –∫—É—Ä—Å–æ—Ä–∞ –¥–ª—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è SQL –∑–∞–ø—Ä–æ—Å–æ–≤
  - –ö—É—Ä—Å–æ—Ä - —ç—Ç–æ –æ–±—ä–µ–∫—Ç, —á–µ—Ä–µ–∑ –∫–æ—Ç–æ—Ä—ã–π –≤—ã–ø–æ–ª–Ω—è—é—Ç—Å—è –≤—Å–µ SQL –∫–æ–º–∞–Ω–¥—ã

**–í–∞–∂–Ω–æ:** –ü–æ—Å–ª–µ –≤—Å–µ—Ö –æ–ø–µ—Ä–∞—Ü–∏–π –Ω—É–∂–Ω–æ –∑–∞–∫—Ä—ã—Ç—å —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ —á–µ—Ä–µ–∑ `conn.close()`

### –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –ø—É—Ç–∏ –∫ Excel —Ñ–∞–π–ª–∞–º

```python
excel_dir = Path('Resources/xlsx')
```

**–ü–æ—è—Å–Ω–µ–Ω–∏—è:**
- **Path('Resources/xlsx')** - —Å–æ–∑–¥–∞–µ—Ç –æ–±—ä–µ–∫—Ç –ø—É—Ç–∏ –∫ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ —Å Excel —Ñ–∞–π–ª–∞–º–∏
- –û—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω—ã–π –ø—É—Ç—å –æ—Ç –º–µ—Å—Ç–∞ –∑–∞–ø—É—Å–∫–∞ —Å–∫—Ä–∏–ø—Ç–∞
- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ —Å—É—â–µ—Å—Ç–≤–æ–≤–∞–Ω–∏—è —Ñ–∞–π–ª–æ–≤ –∏ —á—Ç–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö

### –°–æ–∑–¥–∞–Ω–∏–µ —Ç–∞–±–ª–∏—Ü—ã material_type

```python
cursor.execute('''
CREATE TABLE IF NOT EXISTS material_type (
    id INTEGER PRIMARY KEY AUTOINCREMENT,
    name TEXT NOT NULL UNIQUE,
    loss_percentage REAL
)
''')
```

**–ü–æ—è—Å–Ω–µ–Ω–∏—è:**
- **cursor.execute()** - –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ SQL –∫–æ–º–∞–Ω–¥—ã
- **CREATE TABLE IF NOT EXISTS** - —Å–æ–∑–¥–∞–Ω–∏–µ —Ç–∞–±–ª–∏—Ü—ã, –µ—Å–ª–∏ –æ–Ω–∞ –Ω–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç
  - `IF NOT EXISTS` –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–∞–µ—Ç –æ—à–∏–±–∫—É –ø—Ä–∏ –ø–æ–≤—Ç–æ—Ä–Ω–æ–º –∑–∞–ø—É—Å–∫–µ —Å–∫—Ä–∏–ø—Ç–∞
- **material_type** - –∏–º—è —Ç–∞–±–ª–∏—Ü—ã
- **id INTEGER PRIMARY KEY AUTOINCREMENT** - –ø–æ–ª–µ id:
  - `INTEGER` - —Ü–µ–ª–æ—á–∏—Å–ª–µ–Ω–Ω—ã–π —Ç–∏–ø
  - `PRIMARY KEY` - –ø–µ—Ä–≤–∏—á–Ω—ã–π –∫–ª—é—á (—É–Ω–∏–∫–∞–ª—å–Ω—ã–π –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä)
  - `AUTOINCREMENT` - –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —É–≤–µ–ª–∏—á–µ–Ω–∏–µ –ø—Ä–∏ –¥–æ–±–∞–≤–ª–µ–Ω–∏–∏ –Ω–æ–≤–æ–π –∑–∞–ø–∏—Å–∏
- **name TEXT NOT NULL UNIQUE** - –ø–æ–ª–µ name:
  - `TEXT` - —Ç–µ–∫—Å—Ç–æ–≤—ã–π —Ç–∏–ø
  - `NOT NULL` - –ø–æ–ª–µ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ –¥–ª—è –∑–∞–ø–æ–ª–Ω–µ–Ω–∏—è
  - `UNIQUE` - –∑–Ω–∞—á–µ–Ω–∏–µ –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å —É–Ω–∏–∫–∞–ª—å–Ω—ã–º (–Ω–µ–ª—å–∑—è —Å–æ–∑–¥–∞—Ç—å –¥–≤–∞ —Ç–∏–ø–∞ —Å –æ–¥–∏–Ω–∞–∫–æ–≤—ã–º –∏–º–µ–Ω–µ–º)
- **loss_percentage REAL** - –ø–æ–ª–µ loss_percentage:
  - `REAL` - —á–∏—Å–ª–æ —Å –ø–ª–∞–≤–∞—é—â–µ–π —Ç–æ—á–∫–æ–π
  - –ú–æ–∂–µ—Ç –±—ã—Ç—å NULL (–Ω–µ —É–∫–∞–∑–∞–Ω–æ NOT NULL)

### –°–æ–∑–¥–∞–Ω–∏–µ —Ç–∞–±–ª–∏—Ü—ã product_type

```python
cursor.execute('''
CREATE TABLE IF NOT EXISTS product_type (
    id INTEGER PRIMARY KEY AUTOINCREMENT,
    name TEXT NOT NULL UNIQUE,
    coefficient REAL
)
''')
```

**–ü–æ—è—Å–Ω–µ–Ω–∏—è:**
- –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –∞–Ω–∞–ª–æ–≥–∏—á–Ω–∞ material_type
- –û—Ç–ª–∏—á–∏–µ: –≤–º–µ—Å—Ç–æ `loss_percentage` –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è `coefficient` (–∫–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç —Ç–∏–ø–∞ –ø—Ä–æ–¥—É–∫—Ü–∏–∏)

### –°–æ–∑–¥–∞–Ω–∏–µ —Ç–∞–±–ª–∏—Ü—ã workshops

```python
cursor.execute('''
CREATE TABLE IF NOT EXISTS workshops (
    id INTEGER PRIMARY KEY AUTOINCREMENT,
    name TEXT NOT NULL UNIQUE,
    workshop_type TEXT,
    staff_count INTEGER
)
''')
```

**–ü–æ—è—Å–Ω–µ–Ω–∏—è:**
- **workshop_type TEXT** - —Ç–∏–ø —Ü–µ—Ö–∞ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ–µ –ø–æ–ª–µ, –º–æ–∂–µ—Ç –±—ã—Ç—å NULL)
- **staff_count INTEGER** - –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–µ—Ä—Å–æ–Ω–∞–ª–∞ (—Ü–µ–ª–æ–µ —á–∏—Å–ª–æ, –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ–µ)

### –°–æ–∑–¥–∞–Ω–∏–µ —Ç–∞–±–ª–∏—Ü—ã products

```python
cursor.execute('''
CREATE TABLE IF NOT EXISTS products (
    id INTEGER PRIMARY KEY AUTOINCREMENT,
    name TEXT NOT NULL,
    product_type_id INTEGER,
    article TEXT,
    min_price REAL,
    main_material TEXT,
    FOREIGN KEY (product_type_id) REFERENCES product_type(id)
)
''')
```

**–ü–æ—è—Å–Ω–µ–Ω–∏—è:**
- **name TEXT NOT NULL** - –Ω–∞–∑–≤–∞–Ω–∏–µ –ø—Ä–æ–¥—É–∫—Ü–∏–∏ (–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ–µ, –Ω–æ –Ω–µ —É–Ω–∏–∫–∞–ª—å–Ω–æ–µ)
  - –ù–µ UNIQUE, —Ç–∞–∫ –∫–∞–∫ –º–æ–≥—É—Ç –±—ã—Ç—å –ø—Ä–æ–¥—É–∫—Ç—ã —Å –æ–¥–∏–Ω–∞–∫–æ–≤—ã–º –Ω–∞–∑–≤–∞–Ω–∏–µ–º
- **product_type_id INTEGER** - –≤–Ω–µ—à–Ω–∏–π –∫–ª—é—á –Ω–∞ —Ç–∞–±–ª–∏—Ü—É product_type
- **FOREIGN KEY (product_type_id) REFERENCES product_type(id)** - –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –≤–Ω–µ—à–Ω–µ–≥–æ –∫–ª—é—á–∞:
  - `FOREIGN KEY` - —É–∫–∞–∑—ã–≤–∞–µ—Ç, —á—Ç–æ —ç—Ç–æ –≤–Ω–µ—à–Ω–∏–π –∫–ª—é—á
  - `REFERENCES product_type(id)` - —Å—Å—ã–ª–∞–µ—Ç—Å—è –Ω–∞ –ø–æ–ª–µ id –≤ —Ç–∞–±–ª–∏—Ü–µ product_type
  - –û–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç —Ü–µ–ª–æ—Å—Ç–Ω–æ—Å—Ç—å –¥–∞–Ω–Ω—ã—Ö (–Ω–µ–ª—å–∑—è —Å–æ–∑–¥–∞—Ç—å –ø—Ä–æ–¥—É–∫—Ç —Å –Ω–µ—Å—É—â–µ—Å—Ç–≤—É—é—â–∏–º —Ç–∏–ø–æ–º)
- **article TEXT** - –∞—Ä—Ç–∏–∫—É–ª –ø—Ä–æ–¥—É–∫—Ü–∏–∏ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ–µ)
- **min_price REAL** - –º–∏–Ω–∏–º–∞–ª—å–Ω–∞—è —Ü–µ–Ω–∞ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ–µ)
- **main_material TEXT** - –æ—Å–Ω–æ–≤–Ω–æ–π –º–∞—Ç–µ—Ä–∏–∞–ª (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ–µ)

**–í–∞–∂–Ω–æ:** –¢–∞–±–ª–∏—Ü–∞ product_type –¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å —Å–æ–∑–¥–∞–Ω–∞ –î–û —Å–æ–∑–¥–∞–Ω–∏—è products, —Ç–∞–∫ –∫–∞–∫ –Ω–∞ –Ω–µ—ë —Å—Å—ã–ª–∞–µ—Ç—Å—è –≤–Ω–µ—à–Ω–∏–π –∫–ª—é—á.

### –°–æ–∑–¥–∞–Ω–∏–µ —Ç–∞–±–ª–∏—Ü—ã product_workshops

```python
cursor.execute('''
CREATE TABLE IF NOT EXISTS product_workshops (
    id INTEGER PRIMARY KEY AUTOINCREMENT,
    product_id INTEGER NOT NULL,
    workshop_id INTEGER NOT NULL,
    production_time_hours REAL,
    FOREIGN KEY (product_id) REFERENCES products(id),
    FOREIGN KEY (workshop_id) REFERENCES workshops(id),
    UNIQUE(product_id, workshop_id)
)
''')
```

**–ü–æ—è—Å–Ω–µ–Ω–∏—è:**
- **product_id INTEGER NOT NULL** - –≤–Ω–µ—à–Ω–∏–π –∫–ª—é—á –Ω–∞ products (–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ–µ –ø–æ–ª–µ)
- **workshop_id INTEGER NOT NULL** - –≤–Ω–µ—à–Ω–∏–π –∫–ª—é—á –Ω–∞ workshops (–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ–µ –ø–æ–ª–µ)
- **FOREIGN KEY (product_id) REFERENCES products(id)** - —Å–≤—è–∑—å —Å —Ç–∞–±–ª–∏—Ü–µ–π products
- **FOREIGN KEY (workshop_id) REFERENCES workshops(id)** - —Å–≤—è–∑—å —Å —Ç–∞–±–ª–∏—Ü–µ–π workshops
- **UNIQUE(product_id, workshop_id)** - —É–Ω–∏–∫–∞–ª—å–Ω–æ–µ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ –Ω–∞ –ø–∞—Ä—É –ø–æ–ª–µ–π:
  - –û–¥–∏–Ω –ø—Ä–æ–¥—É–∫—Ç –Ω–µ –º–æ–∂–µ—Ç –±—ã—Ç—å —Å–≤—è–∑–∞–Ω —Å –æ–¥–Ω–∏–º —Ü–µ—Ö–æ–º –¥–≤–∞–∂–¥—ã
  - –≠—Ç–æ –ø—Ä–æ–º–µ–∂—É—Ç–æ—á–Ω–∞—è —Ç–∞–±–ª–∏—Ü–∞ –¥–ª—è —Å–≤—è–∑–∏ "–º–Ω–æ–≥–∏–µ-–∫–æ-–º–Ω–æ–≥–∏–º"

**–°–º—ã—Å–ª —Ç–∞–±–ª–∏—Ü—ã:** –û–¥–∏–Ω –ø—Ä–æ–¥—É–∫—Ç –º–æ–∂–µ—Ç –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç—å—Å—è –≤ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö —Ü–µ—Ö–∞—Ö, –æ–¥–∏–Ω —Ü–µ—Ö –º–æ–∂–µ—Ç –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–æ –ø—Ä–æ–¥—É–∫—Ç–æ–≤.

### –ò–º–ø–æ—Ä—Ç –¥–∞–Ω–Ω—ã—Ö –∏–∑ Excel - Material_type

```python
if os.path.exists(excel_dir / 'Material_type_import.xlsx'):
    df = pd.read_excel(excel_dir / 'Material_type_import.xlsx')
    print(f"\nMaterial_type: {len(df)} –∑–∞–ø–∏—Å–µ–π")
    print(f"–ö–æ–ª–æ–Ω–∫–∏: {list(df.columns)}")
    for _, row in df.iterrows():
        try:
            cursor.execute('''
                INSERT OR IGNORE INTO material_type (name, loss_percentage)
                VALUES (?, ?)
            ''', (str(row['–¢–∏–ø –º–∞—Ç–µ—Ä–∏–∞–ª–∞']) if pd.notna(row['–¢–∏–ø –º–∞—Ç–µ—Ä–∏–∞–ª–∞']) else None,
                  float(row['–ü—Ä–æ—Ü–µ–Ω—Ç –ø–æ—Ç–µ—Ä—å —Å—ã—Ä—å—è']) if pd.notna(row['–ü—Ä–æ—Ü–µ–Ω—Ç –ø–æ—Ç–µ—Ä—å —Å—ã—Ä—å—è']) else None))
        except Exception as e:
            print(f"–û—à–∏–±–∫–∞ –ø—Ä–∏ –∏–º–ø–æ—Ä—Ç–µ Material_type: {e}")
```

**–ü–æ—è—Å–Ω–µ–Ω–∏—è:**
- **os.path.exists()** - –ø—Ä–æ–≤–µ—Ä–∫–∞ —Å—É—â–µ—Å—Ç–≤–æ–≤–∞–Ω–∏—è —Ñ–∞–π–ª–∞
  - `excel_dir / 'Material_type_import.xlsx'` - –æ–±—ä–µ–¥–∏–Ω–µ–Ω–∏–µ –ø—É—Ç–∏ —á–µ—Ä–µ–∑ –æ–ø–µ—Ä–∞—Ç–æ—Ä `/`
- **pd.read_excel()** - —á—Ç–µ–Ω–∏–µ Excel —Ñ–∞–π–ª–∞ –≤ DataFrame (—Ç–∞–±–ª–∏—Ü—É pandas)
- **len(df)** - –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å—Ç—Ä–æ–∫ –≤ DataFrame
- **df.columns** - —Å–ø–∏—Å–æ–∫ –Ω–∞–∑–≤–∞–Ω–∏–π –∫–æ–ª–æ–Ω–æ–∫
- **df.iterrows()** - –∏—Ç–µ—Ä–∞—Ü–∏—è –ø–æ —Å—Ç—Ä–æ–∫–∞–º DataFrame
  - `_` - –∏–≥–Ω–æ—Ä–∏—Ä—É–µ–º –∏–Ω–¥–µ–∫—Å —Å—Ç—Ä–æ–∫–∏
  - `row` - –æ–±—ä–µ–∫—Ç —Å—Ç—Ä–æ–∫–∏ —Å –¥–∞–Ω–Ω—ã–º–∏
- **INSERT OR IGNORE** - –≤—Å—Ç–∞–≤–∫–∞ –∑–∞–ø–∏—Å–∏, –∏–≥–Ω–æ—Ä–∏—Ä—É—è –æ—à–∏–±–∫–∏:
  - –ï—Å–ª–∏ –∑–∞–ø–∏—Å—å —Å —Ç–∞–∫–∏–º –∏–º–µ–Ω–µ–º —É–∂–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç, –æ–Ω–∞ –Ω–µ –±—É–¥–µ—Ç –¥–æ–±–∞–≤–ª–µ–Ω–∞ –ø–æ–≤—Ç–æ—Ä–Ω–æ
  - –ü—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–∞–µ—Ç –¥—É–±–ª–∏–∫–∞—Ç—ã –±–ª–∞–≥–æ–¥–∞—Ä—è UNIQUE –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—é
- **VALUES (?, ?)** - –ø–∞—Ä–∞–º–µ—Ç—Ä–∏–∑–æ–≤–∞–Ω–Ω—ã–π –∑–∞–ø—Ä–æ—Å:
  - `?` - –ø–ª–µ–π—Å—Ö–æ–ª–¥–µ—Ä—ã –¥–ª—è –∑–Ω–∞—á–µ–Ω–∏–π
  - –ë–µ–∑–æ–ø–∞—Å–Ω–æ –æ—Ç SQL-–∏–Ω—ä–µ–∫—Ü–∏–π
  - –ó–Ω–∞—á–µ–Ω–∏—è –ø–µ—Ä–µ–¥–∞—é—Ç—Å—è –≤—Ç–æ—Ä—ã–º –∞—Ä–≥—É–º–µ–Ω—Ç–æ–º –≤ –≤–∏–¥–µ –∫–æ—Ä—Ç–µ–∂–∞
- **str(row['–¢–∏–ø –º–∞—Ç–µ—Ä–∏–∞–ª–∞'])** - –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ –∑–Ω–∞—á–µ–Ω–∏—è –≤ —Å—Ç—Ä–æ–∫—É
- **pd.notna()** - –ø—Ä–æ–≤–µ—Ä–∫–∞, —á—Ç–æ –∑–Ω–∞—á–µ–Ω–∏–µ –Ω–µ —è–≤–ª—è–µ—Ç—Å—è NaN (Not a Number)
  - –ï—Å–ª–∏ –∑–Ω–∞—á–µ–Ω–∏–µ NaN, –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è None (NULL –≤ –ë–î)
- **float()** - –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ –≤ —á–∏—Å–ª–æ —Å –ø–ª–∞–≤–∞—é—â–µ–π —Ç–æ—á–∫–æ–π
- **try/except** - –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫:
  - –ï—Å–ª–∏ –ø—Ä–æ–∏–∑–æ—à–ª–∞ –æ—à–∏–±–∫–∞ –ø—Ä–∏ –∏–º–ø–æ—Ä—Ç–µ –æ–¥–Ω–æ–π –∑–∞–ø–∏—Å–∏, —Å–∫—Ä–∏–ø—Ç –ø—Ä–æ–¥–æ–ª–∂–∏—Ç —Ä–∞–±–æ—Ç—É
  - –í—ã–≤–æ–¥–∏—Ç —Å–æ–æ–±—â–µ–Ω–∏–µ –æ–± –æ—à–∏–±–∫–µ, –Ω–æ –Ω–µ –æ—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç—Å—è

**–ó–∞—á–µ–º –ø—Ä–æ–≤–µ—Ä–∫–∞ pd.notna():**
- Excel —Ñ–∞–π–ª—ã –º–æ–≥—É—Ç —Å–æ–¥–µ—Ä–∂–∞—Ç—å –ø—É—Å—Ç—ã–µ —è—á–µ–π–∫–∏
- pandas —á–∏—Ç–∞–µ—Ç –∏—Ö –∫–∞–∫ NaN
- SQLite –Ω–µ –ø–æ–Ω–∏–º–∞–µ—Ç NaN, –Ω—É–∂–Ω–æ –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞—Ç—å –≤ None

### –ò–º–ø–æ—Ä—Ç –¥–∞–Ω–Ω—ã—Ö - Product_type

```python
if os.path.exists(excel_dir / 'Product_type_import.xlsx'):
    df = pd.read_excel(excel_dir / 'Product_type_import.xlsx')
    # ... –∞–Ω–∞–ª–æ–≥–∏—á–Ω–æ Material_type
    cursor.execute('''
        INSERT OR IGNORE INTO product_type (name, coefficient)
        VALUES (?, ?)
    ''', (str(row['–¢–∏–ø –ø—Ä–æ–¥—É–∫—Ü–∏–∏']) if pd.notna(row['–¢–∏–ø –ø—Ä–æ–¥—É–∫—Ü–∏–∏']) else None,
          float(row['–ö–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç —Ç–∏–ø–∞ –ø—Ä–æ–¥—É–∫—Ü–∏–∏']) if pd.notna(row['–ö–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç —Ç–∏–ø–∞ –ø—Ä–æ–¥—É–∫—Ü–∏–∏']) else None))
```

**–ü–æ—è—Å–Ω–µ–Ω–∏—è:**
- –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –∞–Ω–∞–ª–æ–≥–∏—á–Ω–∞ –∏–º–ø–æ—Ä—Ç—É Material_type
- –û—Ç–ª–∏—á–∏—è:
  - –¢–∞–±–ª–∏—Ü–∞: `product_type`
  - –ö–æ–ª–æ–Ω–∫–∏: `name`, `coefficient`
  - –ù–∞–∑–≤–∞–Ω–∏—è –∫–æ–ª–æ–Ω–æ–∫ –≤ Excel: `'–¢–∏–ø –ø—Ä–æ–¥—É–∫—Ü–∏–∏'`, `'–ö–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç —Ç–∏–ø–∞ –ø—Ä–æ–¥—É–∫—Ü–∏–∏'`

### –ò–º–ø–æ—Ä—Ç –¥–∞–Ω–Ω—ã—Ö - Workshops

```python
cursor.execute('''
    INSERT OR IGNORE INTO workshops (name, workshop_type, staff_count)
    VALUES (?, ?, ?)
''', (str(row['–ù–∞–∑–≤–∞–Ω–∏–µ —Ü–µ—Ö–∞']) if pd.notna(row['–ù–∞–∑–≤–∞–Ω–∏–µ —Ü–µ—Ö–∞']) else None,
      str(row['–¢–∏–ø —Ü–µ—Ö–∞']) if pd.notna(row['–¢–∏–ø —Ü–µ—Ö–∞']) else None,
      int(row['–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —á–µ–ª–æ–≤–µ–∫ –¥–ª—è –ø—Ä–æ–∏–∑–≤–æ–¥—Å—Ç–≤–∞ ']) if pd.notna(row['–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —á–µ–ª–æ–≤–µ–∫ –¥–ª—è –ø—Ä–æ–∏–∑–≤–æ–¥—Å—Ç–≤–∞ ']) else None))
```

**–ü–æ—è—Å–Ω–µ–Ω–∏—è:**
- –¢—Ä–∏ –ø–æ–ª—è: `name`, `workshop_type`, `staff_count`
- **int()** - –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ –≤ —Ü–µ–ª–æ–µ —á–∏—Å–ª–æ –¥–ª—è `staff_count`
- –û–±—Ä–∞—Ç–∏—Ç–µ –≤–Ω–∏–º–∞–Ω–∏–µ –Ω–∞ –ø—Ä–æ–±–µ–ª –≤ –∫–æ–Ω—Ü–µ –Ω–∞–∑–≤–∞–Ω–∏—è –∫–æ–ª–æ–Ω–∫–∏: `'–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —á–µ–ª–æ–≤–µ–∫ –¥–ª—è –ø—Ä–æ–∏–∑–≤–æ–¥—Å—Ç–≤–∞ '`
  - –ù–∞–∑–≤–∞–Ω–∏—è –∫–æ–ª–æ–Ω–æ–∫ –≤ Excel –¥–æ–ª–∂–Ω—ã —Ç–æ—á–Ω–æ —Å–æ–≤–ø–∞–¥–∞—Ç—å

### –ò–º–ø–æ—Ä—Ç –¥–∞–Ω–Ω—ã—Ö - Products (—Å —Ä–∞–∑—Ä–µ—à–µ–Ω–∏–µ–º —Å–≤—è–∑–µ–π)

```python
# –ù–∞—Ö–æ–¥–∏–º product_type_id –ø–æ –∏–º–µ–Ω–∏
product_type_name = str(row['–¢–∏–ø –ø—Ä–æ–¥—É–∫—Ü–∏–∏']) if pd.notna(row['–¢–∏–ø –ø—Ä–æ–¥—É–∫—Ü–∏–∏']) else None
product_type_id = None
if product_type_name:
    cursor.execute('SELECT id FROM product_type WHERE name = ?', (product_type_name,))
    result = cursor.fetchone()
    product_type_id = result[0] if result else None
```

**–ü–æ—è—Å–Ω–µ–Ω–∏—è:**
- **–†–∞–∑—Ä–µ—à–µ–Ω–∏–µ —Å–≤—è–∑–µ–π** - –≤ Excel —É–∫–∞–∑–∞–Ω–æ –∏–º—è —Ç–∏–ø–∞ –ø—Ä–æ–¥—É–∫—Ü–∏–∏, –Ω–æ –≤ –ë–î –Ω—É–∂–µ–Ω ID
- **SELECT id FROM product_type WHERE name = ?** - –ø–æ–∏—Å–∫ ID –ø–æ –∏–º–µ–Ω–∏:
  - –í—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è SQL –∑–∞–ø—Ä–æ—Å –¥–ª—è –ø–æ–∏—Å–∫–∞ –∑–∞–ø–∏—Å–∏
  - `WHERE name = ?` - —É—Å–ª–æ–≤–∏–µ –ø–æ–∏—Å–∫–∞ –ø–æ –∏–º–µ–Ω–∏
- **cursor.fetchone()** - –ø–æ–ª—É—á–µ–Ω–∏–µ –æ–¥–Ω–æ–π –∑–∞–ø–∏—Å–∏ –∏–∑ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞ –∑–∞–ø—Ä–æ—Å–∞:
  - –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç –∫–æ—Ä—Ç–µ–∂ —Å –¥–∞–Ω–Ω—ã–º–∏ –∏–ª–∏ None, –µ—Å–ª–∏ –Ω–∏—á–µ–≥–æ –Ω–µ –Ω–∞–π–¥–µ–Ω–æ
- **result[0]** - –ø–æ–ª—É—á–µ–Ω–∏–µ –ø–µ—Ä–≤–æ–≥–æ —ç–ª–µ–º–µ–Ω—Ç–∞ –∫–æ—Ä—Ç–µ–∂–∞ (ID)
- **if result else None** - –µ—Å–ª–∏ –∑–∞–ø–∏—Å—å –Ω–µ –Ω–∞–π–¥–µ–Ω–∞, –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è None

**–ó–∞—á–µ–º —ç—Ç–æ –Ω—É–∂–Ω–æ:**
- –í Excel —Ñ–∞–π–ª–µ —É–∫–∞–∑–∞–Ω–æ –Ω–∞–∑–≤–∞–Ω–∏–µ —Ç–∏–ø–∞ –ø—Ä–æ–¥—É–∫—Ü–∏–∏ (–Ω–∞–ø—Ä–∏–º–µ—Ä, "–ú–µ–±–µ–ª—å")
- –í —Ç–∞–±–ª–∏—Ü–µ products –Ω—É–∂–Ω–æ —Ö—Ä–∞–Ω–∏—Ç—å ID —Ç–∏–ø–∞ –ø—Ä–æ–¥—É–∫—Ü–∏–∏ (–Ω–∞–ø—Ä–∏–º–µ—Ä, 1)
- –ü–æ—ç—Ç–æ–º—É —Å–Ω–∞—á–∞–ª–∞ –Ω–∞—Ö–æ–¥–∏–º ID –ø–æ –∏–º–µ–Ω–∏, –∑–∞—Ç–µ–º –∏—Å–ø–æ–ª—å–∑—É–µ–º –µ–≥–æ –ø—Ä–∏ –≤—Å—Ç–∞–≤–∫–µ

```python
cursor.execute('''
    INSERT OR IGNORE INTO products (name, product_type_id, article, min_price, main_material)
    VALUES (?, ?, ?, ?, ?)
''', (str(row['–ù–∞–∏–º–µ–Ω–æ–≤–∞–Ω–∏–µ –ø—Ä–æ–¥—É–∫—Ü–∏–∏']) if pd.notna(row['–ù–∞–∏–º–µ–Ω–æ–≤–∞–Ω–∏–µ –ø—Ä–æ–¥—É–∫—Ü–∏–∏']) else None,
      product_type_id,  # –ò—Å–ø–æ–ª—å–∑—É–µ–º –Ω–∞–π–¥–µ–Ω–Ω—ã–π ID
      str(row['–ê—Ä—Ç–∏–∫—É–ª']) if pd.notna(row['–ê—Ä—Ç–∏–∫—É–ª']) else None,
      float(row['–ú–∏–Ω–∏–º–∞–ª—å–Ω–∞—è —Å—Ç–æ–∏–º–æ—Å—Ç—å –¥–ª—è –ø–∞—Ä—Ç–Ω–µ—Ä–∞']) if pd.notna(row['–ú–∏–Ω–∏–º–∞–ª—å–Ω–∞—è —Å—Ç–æ–∏–º–æ—Å—Ç—å –¥–ª—è –ø–∞—Ä—Ç–Ω–µ—Ä–∞']) else None,
      str(row['–û—Å–Ω–æ–≤–Ω–æ–π –º–∞—Ç–µ—Ä–∏–∞–ª']) if pd.notna(row['–û—Å–Ω–æ–≤–Ω–æ–π –º–∞—Ç–µ—Ä–∏–∞–ª']) else None))
```

**–ü–æ—è—Å–Ω–µ–Ω–∏—è:**
- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –Ω–∞–π–¥–µ–Ω–Ω—ã–π `product_type_id` –≤–º–µ—Å—Ç–æ –∏–º–µ–Ω–∏
- –ü—è—Ç—å –ø–æ–ª–µ–π –¥–ª—è –≤—Å—Ç–∞–≤–∫–∏
- –í—Å–µ –∑–Ω–∞—á–µ–Ω–∏—è –ø—Ä–æ–≤–µ—Ä—è—é—Ç—Å—è –Ω–∞ NaN –∏ –ø—Ä–µ–æ–±—Ä–∞–∑—É—é—Ç—Å—è –≤ –Ω—É–∂–Ω—ã–µ —Ç–∏–ø—ã

### –ò–º–ø–æ—Ä—Ç –¥–∞–Ω–Ω—ã—Ö - Product_workshops (–¥–≤–æ–π–Ω–æ–µ —Ä–∞–∑—Ä–µ—à–µ–Ω–∏–µ —Å–≤—è–∑–µ–π)

```python
# –ù–∞—Ö–æ–¥–∏–º product_id –∏ workshop_id –ø–æ –∏–º–µ–Ω–∞–º
product_name = str(row['–ù–∞–∏–º–µ–Ω–æ–≤–∞–Ω–∏–µ –ø—Ä–æ–¥—É–∫—Ü–∏–∏']) if pd.notna(row['–ù–∞–∏–º–µ–Ω–æ–≤–∞–Ω–∏–µ –ø—Ä–æ–¥—É–∫—Ü–∏–∏']) else None
workshop_name = str(row['–ù–∞–∑–≤–∞–Ω–∏–µ —Ü–µ—Ö–∞']) if pd.notna(row['–ù–∞–∑–≤–∞–Ω–∏–µ —Ü–µ—Ö–∞']) else None

product_id = None
workshop_id = None

if product_name:
    cursor.execute('SELECT id FROM products WHERE name = ?', (product_name,))
    result = cursor.fetchone()
    product_id = result[0] if result else None

if workshop_name:
    cursor.execute('SELECT id FROM workshops WHERE name = ?', (workshop_name,))
    result = cursor.fetchone()
    workshop_id = result[0] if result else None
```

**–ü–æ—è—Å–Ω–µ–Ω–∏—è:**
- **–î–≤–æ–π–Ω–æ–µ —Ä–∞–∑—Ä–µ—à–µ–Ω–∏–µ —Å–≤—è–∑–µ–π** - –Ω—É–∂–Ω–æ –Ω–∞–π—Ç–∏ ID –∏ –¥–ª—è –ø—Ä–æ–¥—É–∫—Ç–∞, –∏ –¥–ª—è —Ü–µ—Ö–∞
- –î–≤–∞ –æ—Ç–¥–µ–ª—å–Ω—ã—Ö SQL –∑–∞–ø—Ä–æ—Å–∞ –¥–ª—è –ø–æ–∏—Å–∫–∞ ID
- –ï—Å–ª–∏ —Ö–æ—Ç—è –±—ã –æ–¥–∏–Ω ID –Ω–µ –Ω–∞–π–¥–µ–Ω, —Å–≤—è–∑—å –Ω–µ —Å–æ–∑–¥–∞–µ—Ç—Å—è

```python
if product_id and workshop_id:
    cursor.execute('''
        INSERT OR IGNORE INTO product_workshops (product_id, workshop_id, production_time_hours)
        VALUES (?, ?, ?)
    ''', (product_id, workshop_id,
          float(row['–í—Ä–µ–º—è –∏–∑–≥–æ—Ç–æ–≤–ª–µ–Ω–∏—è, —á']) if pd.notna(row['–í—Ä–µ–º—è –∏–∑–≥–æ—Ç–æ–≤–ª–µ–Ω–∏—è, —á']) else None))
    imported_count += 1
else:
    if not product_id:
        print(f"  –ü—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ: –ø—Ä–æ–¥—É–∫—Ç '{product_name}' –Ω–µ –Ω–∞–π–¥–µ–Ω")
    if not workshop_id:
        print(f"  –ü—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ: —Ü–µ—Ö '{workshop_name}' –Ω–µ –Ω–∞–π–¥–µ–Ω")
```

**–ü–æ—è—Å–Ω–µ–Ω–∏—è:**
- **if product_id and workshop_id** - –ø—Ä–æ–≤–µ—Ä–∫–∞, —á—Ç–æ –æ–±–∞ ID –Ω–∞–π–¥–µ–Ω—ã
- –¢–æ–ª—å–∫–æ –µ—Å–ª–∏ –æ–±–∞ –Ω–∞–π–¥–µ–Ω—ã, —Å–æ–∑–¥–∞–µ—Ç—Å—è —Å–≤—è–∑—å
- **imported_count** - —Å—á–µ—Ç—á–∏–∫ —É—Å–ø–µ—à–Ω–æ –∏–º–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –∑–∞–ø–∏—Å–µ–π
- –ï—Å–ª–∏ —á—Ç–æ-—Ç–æ –Ω–µ –Ω–∞–π–¥–µ–Ω–æ, –≤—ã–≤–æ–¥–∏—Ç—Å—è –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ, –Ω–æ —Å–∫—Ä–∏–ø—Ç –ø—Ä–æ–¥–æ–ª–∂–∞–µ—Ç —Ä–∞–±–æ—Ç—É

**–ó–∞—á–µ–º –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏—è:**
- –ü–æ–º–æ–≥–∞—é—Ç –ø–æ–Ω—è—Ç—å, –∫–∞–∫–∏–µ –¥–∞–Ω–Ω—ã–µ –Ω–µ –±—ã–ª–∏ –∏–º–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞–Ω—ã
- –ü–æ–∑–≤–æ–ª—è—é—Ç –∏—Å–ø—Ä–∞–≤–∏—Ç—å –æ—à–∏–±–∫–∏ –≤ Excel —Ñ–∞–π–ª–∞—Ö

### –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –∏–∑–º–µ–Ω–µ–Ω–∏–π

```python
conn.commit()
print("\n–î–∞–Ω–Ω—ã–µ —É—Å–ø–µ—à–Ω–æ –∏–º–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞–Ω—ã!")
```

**–ü–æ—è—Å–Ω–µ–Ω–∏—è:**
- **conn.commit()** - —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –≤—Å–µ—Ö –∏–∑–º–µ–Ω–µ–Ω–∏–π –≤ –ë–î
  - –î–æ —ç—Ç–æ–≥–æ –≤—Å–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è –±—ã–ª–∏ —Ç–æ–ª—å–∫–æ –≤ –ø–∞–º—è—Ç–∏
  - commit() –∑–∞–ø–∏—Å—ã–≤–∞–µ—Ç –∏—Ö –Ω–∞ –¥–∏—Å–∫
- **–í–∞–∂–Ω–æ:** –ë–µ–∑ commit() –∏–∑–º–µ–Ω–µ–Ω–∏—è –±—É–¥—É—Ç –ø–æ—Ç–µ—Ä—è–Ω—ã –ø—Ä–∏ –∑–∞–∫—Ä—ã—Ç–∏–∏ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è

### –í—ã–≤–æ–¥ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏

```python
print("\n" + "="*60)
print("–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö:")
print("="*60)
for table in ['material_type', 'product_type', 'workshops', 'products', 'product_workshops']:
    cursor.execute(f'SELECT COUNT(*) FROM {table}')
    count = cursor.fetchone()[0]
    print(f"{table}: {count} –∑–∞–ø–∏—Å–µ–π")
```

**–ü–æ—è—Å–Ω–µ–Ω–∏—è:**
- **"="*60** - —Å–æ–∑–¥–∞–Ω–∏–µ —Å—Ç—Ä–æ–∫–∏ –∏–∑ 60 —Å–∏–º–≤–æ–ª–æ–≤ "=" –¥–ª—è –∫—Ä–∞—Å–∏–≤–æ–≥–æ –≤—ã–≤–æ–¥–∞
- **for table in [...]** - –ø–µ—Ä–µ–±–æ—Ä –≤—Å–µ—Ö —Ç–∞–±–ª–∏—Ü
- **SELECT COUNT(*)** - SQL –∑–∞–ø—Ä–æ—Å –¥–ª—è –ø–æ–¥—Å—á–µ—Ç–∞ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ –∑–∞–ø–∏—Å–µ–π
  - `COUNT(*)` - –ø–æ–¥—Å—á–∏—Ç—ã–≤–∞–µ—Ç –≤—Å–µ —Å—Ç—Ä–æ–∫–∏ –≤ —Ç–∞–±–ª–∏—Ü–µ
- **cursor.fetchone()[0]** - –ø–æ–ª—É—á–µ–Ω–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞ (–∫–æ—Ä—Ç–µ–∂ —Å –æ–¥–Ω–∏–º —ç–ª–µ–º–µ–Ω—Ç–æ–º) –∏ –∏–∑–≤–ª–µ—á–µ–Ω–∏–µ –∑–Ω–∞—á–µ–Ω–∏—è
- –í—ã–≤–æ–¥–∏—Ç –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∑–∞–ø–∏—Å–µ–π –≤ –∫–∞–∂–¥–æ–π —Ç–∞–±–ª–∏—Ü–µ

### –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫

```python
try:
    # ... –≤–µ—Å—å –∫–æ–¥ –∏–º–ø–æ—Ä—Ç–∞
except Exception as e:
    print(f"–û—à–∏–±–∫–∞ –ø—Ä–∏ –∏–º–ø–æ—Ä—Ç–µ: {e}")
    import traceback
    traceback.print_exc()
```

**–ü–æ—è—Å–Ω–µ–Ω–∏—è:**
- **try/except** - –æ–±—Ä–∞–±–æ—Ç–∫–∞ –∏—Å–∫–ª—é—á–µ–Ω–∏–π
- **Exception** - –ª–æ–≤–∏—Ç –≤—Å–µ —Ç–∏–ø—ã –æ—à–∏–±–æ–∫
- **traceback.print_exc()** - –≤—ã–≤–æ–¥–∏—Ç –ø–æ–ª–Ω—ã–π —Å—Ç–µ–∫ –≤—ã–∑–æ–≤–æ–≤ –ø—Ä–∏ –æ—à–∏–±–∫–µ
  - –ü–æ–º–æ–≥–∞–µ—Ç –ø–æ–Ω—è—Ç—å, –≥–¥–µ –∏–º–µ–Ω–Ω–æ –ø—Ä–æ–∏–∑–æ—à–ª–∞ –æ—à–∏–±–∫–∞

### –ó–∞–∫—Ä—ã—Ç–∏–µ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è

```python
finally:
    conn.close()
    print(f"\n–ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∞ –≤ —Ñ–∞–π–ª: {DB_NAME}")
```

**–ü–æ—è—Å–Ω–µ–Ω–∏—è:**
- **finally** - –±–ª–æ–∫, –∫–æ—Ç–æ—Ä—ã–π –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è –≤—Å–µ–≥–¥–∞, –¥–∞–∂–µ –ø—Ä–∏ –æ—à–∏–±–∫–µ
- **conn.close()** - –∑–∞–∫—Ä—ã—Ç–∏–µ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è —Å –ë–î
  - –û—Å–≤–æ–±–æ–∂–¥–∞–µ—Ç —Ä–µ—Å—É—Ä—Å—ã
  - –í–∞–∂–Ω–æ –≤—Å–µ–≥–¥–∞ –∑–∞–∫—Ä—ã–≤–∞—Ç—å —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è
- –°–æ–æ–±—â–µ–Ω–∏–µ –æ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–∏ –ë–î

**–í–∞–∂–Ω–æ:** –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ `finally` –≥–∞—Ä–∞–Ω—Ç–∏—Ä—É–µ—Ç, —á—Ç–æ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ –±—É–¥–µ—Ç –∑–∞–∫—Ä—ã—Ç–æ –¥–∞–∂–µ –ø—Ä–∏ –æ—à–∏–±–∫–µ.

---

## üìÑ –§–∞–π–ª: `create_er_diagram.py`

**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –°–∫—Ä–∏–ø—Ç –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ —Å–æ–∑–¥–∞–Ω–∏—è ER-–¥–∏–∞–≥—Ä–∞–º–º—ã –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö –≤ —Ñ–æ—Ä–º–∞—Ç–µ PDF –Ω–∞ –æ—Å–Ω–æ–≤–µ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–π –ë–î.

### –ò–º–ø–æ—Ä—Ç—ã

```python
import sqlite3
import matplotlib.pyplot as plt
import matplotlib.patches as mpatches
from matplotlib.backends.backend_pdf import PdfPages
import matplotlib.patches as patches
from matplotlib.patches import FancyBboxPatch, FancyArrowPatch
import numpy as np
```

**–ü–æ—è—Å–Ω–µ–Ω–∏—è:**
- **sqlite3** - –¥–ª—è –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ –ë–î –∏ –ø–æ–ª—É—á–µ–Ω–∏—è —Å—Ç—Ä—É–∫—Ç—É—Ä—ã —Ç–∞–±–ª–∏—Ü
- **matplotlib.pyplot** - –æ—Å–Ω–æ–≤–Ω–∞—è –±–∏–±–ª–∏–æ—Ç–µ–∫–∞ –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –≥—Ä–∞—Ñ–∏–∫–æ–≤ –∏ –¥–∏–∞–≥—Ä–∞–º–º
- **matplotlib.patches** - –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è —Ñ–∏–≥—É—Ä (–ø—Ä—è–º–æ—É–≥–æ–ª—å–Ω–∏–∫–∏, —Å—Ç—Ä–µ–ª–∫–∏)
- **FancyBboxPatch** - –∫—Ä–∞—Å–∏–≤—ã–µ –ø—Ä—è–º–æ—É–≥–æ–ª—å–Ω–∏–∫–∏ —Å –∑–∞–∫—Ä—É–≥–ª–µ–Ω–Ω—ã–º–∏ —É–≥–ª–∞–º–∏
- **FancyArrowPatch** - —Å—Ç—Ä–µ–ª–∫–∏ –¥–ª—è —Å–≤—è–∑–µ–π –º–µ–∂–¥—É —Ç–∞–±–ª–∏—Ü–∞–º–∏
- **numpy** - –¥–ª—è –º–∞—Ç–µ–º–∞—Ç–∏—á–µ—Å–∫–∏—Ö –æ–ø–µ—Ä–∞—Ü–∏–π (—Ö–æ—Ç—è –≤ –¥–∞–Ω–Ω–æ–º —Å–∫—Ä–∏–ø—Ç–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –º–∏–Ω–∏–º–∞–ª—å–Ω–æ)

### –ù–∞—Å—Ç—Ä–æ–π–∫–∞ —Å—Ç–∏–ª—è

```python
plt.rcParams['font.family'] = 'DejaVu Sans'
plt.rcParams['font.size'] = 10
plt.rcParams['figure.dpi'] = 150
```

**–ü–æ—è—Å–Ω–µ–Ω–∏—è:**
- **plt.rcParams** - –≥–ª–æ–±–∞–ª—å–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ matplotlib
- **font.family** - —à—Ä–∏—Ñ—Ç –¥–ª—è —Ç–µ–∫—Å—Ç–∞ –Ω–∞ –¥–∏–∞–≥—Ä–∞–º–º–µ
  - 'DejaVu Sans' - —Ö–æ—Ä–æ—à–æ —á–∏—Ç–∞–µ–º—ã–π —à—Ä–∏—Ñ—Ç, –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –∫–∏—Ä–∏–ª–ª–∏—Ü—É
- **font.size** - —Ä–∞–∑–º–µ—Ä —à—Ä–∏—Ñ—Ç–∞ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é
- **figure.dpi** - —Ä–∞–∑—Ä–µ—à–µ–Ω–∏–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è (dots per inch)
  - 150 dpi - —Ö–æ—Ä–æ—à–µ–µ –∫–∞—á–µ—Å—Ç–≤–æ –¥–ª—è PDF

### –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ –ë–î –∏ –ø–æ–ª—É—á–µ–Ω–∏–µ —Å–ø–∏—Å–∫–∞ —Ç–∞–±–ª–∏—Ü

```python
conn = sqlite3.connect(DB_NAME)
cursor = conn.cursor()

cursor.execute("SELECT name FROM sqlite_master WHERE type='table'")
tables = [row[0] for row in cursor.fetchall()]
```

**–ü–æ—è—Å–Ω–µ–Ω–∏—è:**
- **sqlite_master** - —Å–∏—Å—Ç–µ–º–Ω–∞—è —Ç–∞–±–ª–∏—Ü–∞ SQLite, —Å–æ–¥–µ—Ä–∂–∏—Ç –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –≤—Å–µ—Ö —Ç–∞–±–ª–∏—Ü–∞—Ö
- **WHERE type='table'** - —Ñ–∏–ª—å—Ç—Ä —Ç–æ–ª—å–∫–æ –¥–ª—è —Ç–∞–±–ª–∏—Ü (–∏—Å–∫–ª—é—á–∞–µ—Ç –∏–Ω–¥–µ–∫—Å—ã, —Ç—Ä–∏–≥–≥–µ—Ä—ã –∏ —Ç.–¥.)
- **cursor.fetchall()** - –ø–æ–ª—É—á–µ–Ω–∏–µ –≤—Å–µ—Ö —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ –∑–∞–ø—Ä–æ—Å–∞
- **[row[0] for row in ...]** - list comprehension –¥–ª—è –∏–∑–≤–ª–µ—á–µ–Ω–∏—è –ø–µ—Ä–≤–æ–≥–æ —ç–ª–µ–º–µ–Ω—Ç–∞ –∫–∞–∂–¥–æ–π —Å—Ç—Ä–æ–∫–∏ (–∏–º—è —Ç–∞–±–ª–∏—Ü—ã)

**–†–µ–∑—É–ª—å—Ç–∞—Ç:** –°–ø–∏—Å–æ–∫ –∏–º–µ–Ω –≤—Å–µ—Ö —Ç–∞–±–ª–∏—Ü –≤ –ë–î: `['material_type', 'product_type', 'workshops', 'products', 'product_workshops']`

### –ü–æ–ª—É—á–µ–Ω–∏–µ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã —Ç–∞–±–ª–∏—Ü

```python
table_info = {}
for table in tables:
    cursor.execute(f"PRAGMA table_info({table})")
    columns = cursor.fetchall()
    table_info[table] = columns
```

**–ü–æ—è—Å–Ω–µ–Ω–∏—è:**
- **PRAGMA table_info(table_name)** - —Å–ø–µ—Ü–∏–∞–ª—å–Ω–∞—è –∫–æ–º–∞–Ω–¥–∞ SQLite –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ –∫–æ–ª–æ–Ω–∫–∞—Ö —Ç–∞–±–ª–∏—Ü—ã
  - –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Å–ø–∏—Å–æ–∫ –∫–æ—Ä—Ç–µ–∂–µ–π —Å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–µ–π –æ –∫–∞–∂–¥–æ–π –∫–æ–ª–æ–Ω–∫–µ
- **table_info** - —Å–ª–æ–≤–∞—Ä—å, –≥–¥–µ –∫–ª—é—á - –∏–º—è —Ç–∞–±–ª–∏—Ü—ã, –∑–Ω–∞—á–µ–Ω–∏–µ - —Å–ø–∏—Å–æ–∫ –∫–æ–ª–æ–Ω–æ–∫
- –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –∫–∞–∂–¥–æ–≥–æ –∫–æ—Ä—Ç–µ–∂–∞ –∫–æ–ª–æ–Ω–∫–∏:
  - `[0]` - cid (column id)
  - `[1]` - name (–∏–º—è –∫–æ–ª–æ–Ω–∫–∏)
  - `[2]` - type (—Ç–∏–ø –¥–∞–Ω–Ω—ã—Ö)
  - `[3]` - notnull (0 –∏–ª–∏ 1)
  - `[4]` - default value
  - `[5]` - pk (primary key, 0 –∏–ª–∏ 1)

### –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —Å–≤—è–∑–µ–π (Foreign Keys)

```python
relationships = []
for table in tables:
    cursor.execute(f"PRAGMA foreign_key_list({table})")
    fks = cursor.fetchall()
    for fk in fks:
        relationships.append({
            'from_table': table,
            'from_column': fk[3],
            'to_table': fk[2],
            'to_column': fk[4] if fk[4] else 'id'
        })
```

**–ü–æ—è—Å–Ω–µ–Ω–∏—è:**
- **PRAGMA foreign_key_list(table_name)** - –ø–æ–ª—É—á–µ–Ω–∏–µ —Å–ø–∏—Å–∫–∞ –≤–Ω–µ—à–Ω–∏—Ö –∫–ª—é—á–µ–π —Ç–∞–±–ª–∏—Ü—ã
- **fk[3]** - –∏–º—è –∫–æ–ª–æ–Ω–∫–∏ —Å –≤–Ω–µ—à–Ω–∏–º –∫–ª—é—á–æ–º (from_column)
- **fk[2]** - –∏–º—è —Ç–∞–±–ª–∏—Ü—ã, –Ω–∞ –∫–æ—Ç–æ—Ä—É—é —Å—Å—ã–ª–∞–µ—Ç—Å—è –∫–ª—é—á (to_table)
- **fk[4]** - –∏–º—è –∫–æ–ª–æ–Ω–∫–∏ –≤ —Ü–µ–ª–µ–≤–æ–π —Ç–∞–±–ª–∏—Ü–µ (to_column), –µ—Å–ª–∏ –Ω–µ —É–∫–∞–∑–∞–Ω–æ, –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è 'id'
- **relationships** - —Å–ø–∏—Å–æ–∫ —Å–ª–æ–≤–∞—Ä–µ–π —Å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–µ–π –æ —Å–≤—è–∑—è—Ö

**–†–µ–∑—É–ª—å—Ç–∞—Ç:** –°–ø–∏—Å–æ–∫ –≤—Å–µ—Ö —Å–≤—è–∑–µ–π –º–µ–∂–¥—É —Ç–∞–±–ª–∏—Ü–∞–º–∏ –¥–ª—è –æ—Ç—Ä–∏—Å–æ–≤–∫–∏ —Å—Ç—Ä–µ–ª–æ–∫ –Ω–∞ –¥–∏–∞–≥—Ä–∞–º–º–µ.

### –°–æ–∑–¥–∞–Ω–∏–µ —Ñ–∏–≥—É—Ä—ã matplotlib

```python
fig, ax = plt.subplots(1, 1, figsize=(18, 12))
ax.set_xlim(0, 18)
ax.set_ylim(0, 12)
ax.axis('off')
fig.patch.set_facecolor('white')
```

**–ü–æ—è—Å–Ω–µ–Ω–∏—è:**
- **plt.subplots(1, 1)** - —Å–æ–∑–¥–∞–Ω–∏–µ —Ñ–∏–≥—É—Ä—ã —Å –æ–¥–Ω–∏–º –ø–æ–¥–≥—Ä–∞—Ñ–∏–∫–æ–º
  - –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç –∫–æ—Ä—Ç–µ–∂ (figure, axes)
- **figsize=(18, 12)** - —Ä–∞–∑–º–µ—Ä —Ñ–∏–≥—É—Ä—ã –≤ –¥—é–π–º–∞—Ö (—à–∏—Ä–∏–Ω–∞ x –≤—ã—Å–æ—Ç–∞)
  - –ë–æ–ª—å—à–æ–π —Ä–∞–∑–º–µ—Ä –¥–ª—è —Ä–∞–∑–º–µ—â–µ–Ω–∏—è –≤—Å–µ—Ö —Ç–∞–±–ª–∏—Ü
- **ax.set_xlim(0, 18)** - —É—Å—Ç–∞–Ω–æ–≤–∫–∞ –≥—Ä–∞–Ω–∏—Ü –ø–æ –æ—Å–∏ X
- **ax.set_ylim(0, 12)** - —É—Å—Ç–∞–Ω–æ–≤–∫–∞ –≥—Ä–∞–Ω–∏—Ü –ø–æ –æ—Å–∏ Y
- **ax.axis('off')** - –æ—Ç–∫–ª—é—á–µ–Ω–∏–µ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –æ—Å–µ–π –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç
- **fig.patch.set_facecolor('white')** - –±–µ–ª—ã–π —Ñ–æ–Ω —Ñ–∏–≥—É—Ä—ã

### –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —Ü–≤–µ—Ç–æ–≤

```python
header_color = '#2E86AB'      # –°–∏–Ω–∏–π –¥–ª—è –∑–∞–≥–æ–ª–æ–≤–∫–æ–≤ —Ç–∞–±–ª–∏—Ü
table_bg = '#F0F8FF'          # –°–≤–µ—Ç–ª–æ-–≥–æ–ª—É–±–æ–π –¥–ª—è —Ñ–æ–Ω–∞ —Ç–∞–±–ª–∏—Ü
border_color = '#1E5A7A'      # –¢–µ–º–Ω–æ-—Å–∏–Ω–∏–π –¥–ª—è –≥—Ä–∞–Ω–∏—Ü
pk_color = '#FFD700'          # –ó–æ–ª–æ—Ç–æ–π –¥–ª—è –ø–µ—Ä–≤–∏—á–Ω—ã—Ö –∫–ª—é—á–µ–π
fk_color = '#FF6B6B'          # –ö—Ä–∞—Å–Ω—ã–π –¥–ª—è –≤–Ω–µ—à–Ω–∏—Ö –∫–ª—é—á–µ–π
text_color = '#000000'        # –ß–µ—Ä–Ω—ã–π –¥–ª—è —Ç–µ–∫—Å—Ç–∞
line_color = '#666666'        # –°–µ—Ä—ã–π –¥–ª—è –ª–∏–Ω–∏–π —Å–≤—è–∑–µ–π
```

**–ü–æ—è—Å–Ω–µ–Ω–∏—è:**
- –¶–≤–µ—Ç–∞ –≤ —Ñ–æ—Ä–º–∞—Ç–µ HEX (#RRGGBB)
- –ò—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –¥–ª—è –≤–∏–∑—É–∞–ª—å–Ω–æ–≥–æ —Ä–∞–∑–ª–∏—á–∏—è —ç–ª–µ–º–µ–Ω—Ç–æ–≤ –¥–∏–∞–≥—Ä–∞–º–º—ã
- PK –∏ FK –≤—ã–¥–µ–ª—è—é—Ç—Å—è —Ü–≤–µ—Ç–æ–º –¥–ª—è –ª—É—á—à–µ–π —á–∏—Ç–∞–µ–º–æ—Å—Ç–∏

### –ü–æ–∑–∏—Ü–∏–∏ —Ç–∞–±–ª–∏—Ü –Ω–∞ –¥–∏–∞–≥—Ä–∞–º–º–µ

```python
table_positions = {
    'material_type': (1.5, 8.5),
    'product_type': (1.5, 6),
    'workshops': (1.5, 3.5),
    'products': (10, 7),
    'product_workshops': (10, 3.5)
}
```

**–ü–æ—è—Å–Ω–µ–Ω–∏—è:**
- –°–ª–æ–≤–∞—Ä—å —Å –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç–∞–º–∏ (x, y) –¥–ª—è –∫–∞–∂–¥–æ–π —Ç–∞–±–ª–∏—Ü—ã
- –ö–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã –≤ –µ–¥–∏–Ω–∏—Ü–∞—Ö —Ñ–∏–≥—É—Ä—ã matplotlib
- –†–∞—Å–ø–æ–ª–æ–∂–µ–Ω–∏–µ –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–æ –¥–ª—è —á–∏—Ç–∞–µ–º–æ—Å—Ç–∏:
  - –°–ª–µ–≤–∞: —Å–ø—Ä–∞–≤–æ—á–Ω—ã–µ —Ç–∞–±–ª–∏—Ü—ã (material_type, product_type, workshops)
  - –°–ø—Ä–∞–≤–∞: –æ—Å–Ω–æ–≤–Ω—ã–µ —Ç–∞–±–ª–∏—Ü—ã (products, product_workshops)

### –†–∞–∑–º–µ—Ä—ã —ç–ª–µ–º–µ–Ω—Ç–æ–≤ —Ç–∞–±–ª–∏—Ü—ã

```python
table_width = 5.5
header_height = 0.4
row_height = 0.35
padding = 0.1
```

**–ü–æ—è—Å–Ω–µ–Ω–∏—è:**
- **table_width** - —à–∏—Ä–∏–Ω–∞ —Ç–∞–±–ª–∏—Ü—ã
- **header_height** - –≤—ã—Å–æ—Ç–∞ –∑–∞–≥–æ–ª–æ–≤–∫–∞ —Ç–∞–±–ª–∏—Ü—ã
- **row_height** - –≤—ã—Å–æ—Ç–∞ —Å—Ç—Ä–æ–∫–∏ —Å –∫–æ–ª–æ–Ω–∫–æ–π
- **padding** - –æ—Ç—Å—Ç—É–ø—ã –≤–Ω—É—Ç—Ä–∏ —Ç–∞–±–ª–∏—Ü—ã

### –û—Ç—Ä–∏—Å–æ–≤–∫–∞ —Ç–∞–±–ª–∏—Ü

```python
for table_name, (x, y) in table_positions.items():
    if table_name not in table_info:
        continue
    
    columns = table_info[table_name]
    table_height = header_height + len(columns) * row_height
```

**–ü–æ—è—Å–Ω–µ–Ω–∏—è:**
- **table_positions.items()** - –ø–µ—Ä–µ–±–æ—Ä –≤—Å–µ—Ö —Ç–∞–±–ª–∏—Ü –∏ –∏—Ö –ø–æ–∑–∏—Ü–∏–π
- **if table_name not in table_info** - –ø—Ä–æ–≤–µ—Ä–∫–∞, —á—Ç–æ —Ç–∞–±–ª–∏—Ü–∞ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç
- **table_height** - –≤—ã—á–∏—Å–ª–µ–Ω–∏–µ –≤—ã—Å–æ—Ç—ã —Ç–∞–±–ª–∏—Ü—ã –Ω–∞ –æ—Å–Ω–æ–≤–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ –∫–æ–ª–æ–Ω–æ–∫

### –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç —Ç–∞–±–ª–∏—Ü

```python
table_boxes[table_name] = {
    'x': x,
    'y': y,
    'width': table_width,
    'height': table_height,
    'center_x': x + table_width / 2,
    'center_y': y + table_height / 2
}
```

**–ü–æ—è—Å–Ω–µ–Ω–∏—è:**
- –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç –∏ —Ä–∞–∑–º–µ—Ä–æ–≤ –∫–∞–∂–¥–æ–π —Ç–∞–±–ª–∏—Ü—ã
- **center_x, center_y** - –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã —Ü–µ–Ω—Ç—Ä–∞ —Ç–∞–±–ª–∏—Ü—ã
- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è —Ä–∞—Å—á–µ—Ç–∞ –ø–æ–∑–∏—Ü–∏–π —Å—Ç—Ä–µ–ª–æ–∫ —Å–≤—è–∑–µ–π

### –û—Ç—Ä–∏—Å–æ–≤–∫–∞ —Ä–∞–º–∫–∏ —Ç–∞–±–ª–∏—Ü—ã

```python
table_box = FancyBboxPatch(
    (x, y), table_width, table_height,
    boxstyle="round,pad=0.02",
    edgecolor=border_color,
    facecolor=table_bg,
    linewidth=2,
    zorder=1
)
ax.add_patch(table_box)
```

**–ü–æ—è—Å–Ω–µ–Ω–∏—è:**
- **FancyBboxPatch** - —Å–æ–∑–¥–∞–Ω–∏–µ –ø—Ä—è–º–æ—É–≥–æ–ª—å–Ω–∏–∫–∞ —Å –∑–∞–∫—Ä—É–≥–ª–µ–Ω–Ω—ã–º–∏ —É–≥–ª–∞–º–∏
- **(x, y)** - –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã –ª–µ–≤–æ–≥–æ –Ω–∏–∂–Ω–µ–≥–æ —É–≥–ª–∞
- **boxstyle="round,pad=0.02"** - –∑–∞–∫—Ä—É–≥–ª–µ–Ω–Ω—ã–µ —É–≥–ª—ã —Å –Ω–µ–±–æ–ª—å—à–∏–º –æ—Ç—Å—Ç—É–ø–æ–º
- **edgecolor** - —Ü–≤–µ—Ç –≥—Ä–∞–Ω–∏—Ü—ã
- **facecolor** - —Ü–≤–µ—Ç –∑–∞–ª–∏–≤–∫–∏
- **linewidth** - —Ç–æ–ª—â–∏–Ω–∞ –ª–∏–Ω–∏–∏
- **zorder** - –ø–æ—Ä—è–¥–æ–∫ –æ—Ç—Ä–∏—Å–æ–≤–∫–∏ (–º–µ–Ω—å—à–µ = —Ä–∏—Å—É–µ—Ç—Å—è —Ä–∞–Ω—å—à–µ, –ø–æ–¥ –¥—Ä—É–≥–∏–º–∏ —ç–ª–µ–º–µ–Ω—Ç–∞–º–∏)
- **ax.add_patch()** - –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ —Ñ–∏–≥—É—Ä—ã –Ω–∞ –≥—Ä–∞—Ñ–∏–∫

### –û—Ç—Ä–∏—Å–æ–≤–∫–∞ –∑–∞–≥–æ–ª–æ–≤–∫–∞ —Ç–∞–±–ª–∏—Ü—ã

```python
header_box = FancyBboxPatch(
    (x, y + table_height - header_height), table_width, header_height,
    boxstyle="round,pad=0.02",
    edgecolor=border_color,
    facecolor=header_color,
    linewidth=2,
    zorder=2
)
ax.add_patch(header_box)

display_name = table_name.replace('_', ' ').title()
ax.text(x + table_width/2, y + table_height - header_height/2, 
       display_name, ha='center', va='center', 
       fontsize=11, fontweight='bold', color='white', zorder=3)
```

**–ü–æ—è—Å–Ω–µ–Ω–∏—è:**
- **header_box** - –ø—Ä—è–º–æ—É–≥–æ–ª—å–Ω–∏–∫ –¥–ª—è –∑–∞–≥–æ–ª–æ–≤–∫–∞ (—Ç–µ–º–Ω–µ–µ –æ—Å–Ω–æ–≤–Ω–æ–≥–æ —Ñ–æ–Ω–∞)
- **y + table_height - header_height** - –ø–æ–∑–∏—Ü–∏—è –∑–∞–≥–æ–ª–æ–≤–∫–∞ (–≤–≤–µ—Ä—Ö—É —Ç–∞–±–ª–∏—Ü—ã)
- **display_name** - –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ –∏–º–µ–Ω–∏ —Ç–∞–±–ª–∏—Ü—ã:
  - `replace('_', ' ')` - –∑–∞–º–µ–Ω–∞ –ø–æ–¥—á–µ—Ä–∫–∏–≤–∞–Ω–∏–π –Ω–∞ –ø—Ä–æ–±–µ–ª—ã
  - `title()` - –ø–µ—Ä–≤–∞—è –±—É–∫–≤–∞ –∫–∞–∂–¥–æ–≥–æ —Å–ª–æ–≤–∞ –∑–∞–≥–ª–∞–≤–Ω–∞—è
  - –ü—Ä–∏–º–µ—Ä: "material_type" ‚Üí "Material Type"
- **ax.text()** - –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ —Ç–µ–∫—Å—Ç–∞:
  - **ha='center'** - –≥–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª—å–Ω–æ–µ –≤—ã—Ä–∞–≤–Ω–∏–≤–∞–Ω–∏–µ –ø–æ —Ü–µ–Ω—Ç—Ä—É
  - **va='center'** - –≤–µ—Ä—Ç–∏–∫–∞–ª—å–Ω–æ–µ –≤—ã—Ä–∞–≤–Ω–∏–≤–∞–Ω–∏–µ –ø–æ —Ü–µ–Ω—Ç—Ä—É
  - **fontweight='bold'** - –∂–∏—Ä–Ω—ã–π —à—Ä–∏—Ñ—Ç
  - **color='white'** - –±–µ–ª—ã–π —Ç–µ–∫—Å—Ç –Ω–∞ —Ç–µ–º–Ω–æ–º —Ñ–æ–Ω–µ

### –û—Ç—Ä–∏—Å–æ–≤–∫–∞ –∫–æ–ª–æ–Ω–æ–∫

```python
for i, col in enumerate(columns):
    col_y = y + table_height - header_height - (i + 1) * row_height
    col_name = col[1]
    col_type = col[2]
    
    is_pk = col[5] == 1
    is_fk = any(r['from_table'] == table_name and r['from_column'] == col_name 
               for r in relationships)
```

**–ü–æ—è—Å–Ω–µ–Ω–∏—è:**
- **enumerate(columns)** - –ø–µ—Ä–µ–±–æ—Ä –∫–æ–ª–æ–Ω–æ–∫ —Å –∏–Ω–¥–µ–∫—Å–æ–º
- **col_y** - –≤—ã—á–∏—Å–ª–µ–Ω–∏–µ Y –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã –¥–ª—è –∫–∞–∂–¥–æ–π –∫–æ–ª–æ–Ω–∫–∏ (—Å–≤–µ—Ä—Ö—É –≤–Ω–∏–∑)
- **col[1]** - –∏–º—è –∫–æ–ª–æ–Ω–∫–∏
- **col[2]** - —Ç–∏–ø –¥–∞–Ω–Ω—ã—Ö –∫–æ–ª–æ–Ω–∫–∏
- **col[5] == 1** - –ø—Ä–æ–≤–µ—Ä–∫–∞, —è–≤–ª—è–µ—Ç—Å—è –ª–∏ –∫–æ–ª–æ–Ω–∫–∞ –ø–µ—Ä–≤–∏—á–Ω—ã–º –∫–ª—é—á–æ–º
- **any(...)** - –ø—Ä–æ–≤–µ—Ä–∫–∞, —è–≤–ª—è–µ—Ç—Å—è –ª–∏ –∫–æ–ª–æ–Ω–∫–∞ –≤–Ω–µ—à–Ω–∏–º –∫–ª—é—á–æ–º:
  - –ü—Ä–æ–≤–µ—Ä—è–µ—Ç –≤—Å–µ —Å–≤—è–∑–∏ –≤ relationships
  - –ò—â–µ—Ç —Å–æ–≤–ø–∞–¥–µ–Ω–∏–µ –ø–æ —Ç–∞–±–ª–∏—Ü–µ –∏ –∏–º–µ–Ω–∏ –∫–æ–ª–æ–Ω–∫–∏

### –í—ã–¥–µ–ª–µ–Ω–∏–µ PK –∏ FK —Ü–≤–µ—Ç–æ–º

```python
col_bg = 'white'
if is_pk:
    col_bg = pk_color
elif is_fk:
    col_bg = fk_color

if is_pk or is_fk:
    col_box = FancyBboxPatch(
        (x + padding, col_y), table_width - 2*padding, row_height,
        boxstyle="round,pad=0.01",
        edgecolor=border_color,
        facecolor=col_bg,
        linewidth=1,
        zorder=2,
        alpha=0.7
    )
    ax.add_patch(col_box)
```

**–ü–æ—è—Å–Ω–µ–Ω–∏—è:**
- **col_bg** - —Ü–≤–µ—Ç —Ñ–æ–Ω–∞ –∫–æ–ª–æ–Ω–∫–∏ (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é –±–µ–ª—ã–π)
- –ï—Å–ª–∏ PK - –∑–æ–ª–æ—Ç–æ–π —Ñ–æ–Ω
- –ï—Å–ª–∏ FK - –∫—Ä–∞—Å–Ω—ã–π —Ñ–æ–Ω
- **alpha=0.7** - –ø—Ä–æ–∑—Ä–∞—á–Ω–æ—Å—Ç—å 70% (–ø–æ–ª—É–ø—Ä–æ–∑—Ä–∞—á–Ω—ã–π —Ñ–æ–Ω)

### –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –ø—Ä–µ—Ñ–∏–∫—Å–æ–≤ PK/FK

```python
prefix = ""
if is_pk:
    prefix = "PK: "
elif is_fk:
    prefix = "FK: "

col_text = f"{prefix}{col_name}"
```

**–ü–æ—è—Å–Ω–µ–Ω–∏—è:**
- –î–æ–±–∞–≤–ª–µ–Ω–∏–µ —Ç–µ–∫—Å—Ç–æ–≤—ã—Ö –ø—Ä–µ—Ñ–∏–∫—Å–æ–≤ –¥–ª—è –≤–∏–∑—É–∞–ª—å–Ω–æ–≥–æ –æ–±–æ–∑–Ω–∞—á–µ–Ω–∏—è
- "PK: " –ø–µ—Ä–µ–¥ –∏–º–µ–Ω–µ–º –ø–µ—Ä–≤–∏—á–Ω–æ–≥–æ –∫–ª—é—á–∞
- "FK: " –ø–µ—Ä–µ–¥ –∏–º–µ–Ω–µ–º –≤–Ω–µ—à–Ω–µ–≥–æ –∫–ª—é—á–∞

### –û—Ç—Ä–∏—Å–æ–≤–∫–∞ —Ç–µ–∫—Å—Ç–∞ –∫–æ–ª–æ–Ω–∫–∏

```python
ax.text(x + padding + 0.15, col_y + row_height/2, col_text,
       ha='left', va='center', fontsize=9, 
       fontweight='bold' if is_pk or is_fk else 'normal',
       color=text_color, zorder=3)

ax.text(x + table_width - padding - 0.15, col_y + row_height/2, type_text,
       ha='right', va='center', fontsize=8, style='italic',
       color='#555555', zorder=3)
```

**–ü–æ—è—Å–Ω–µ–Ω–∏—è:**
- –ü–µ—Ä–≤—ã–π **ax.text()** - –∏–º—è –∫–æ–ª–æ–Ω–∫–∏ —Å–ª–µ–≤–∞:
  - –ñ–∏—Ä–Ω—ã–π —à—Ä–∏—Ñ—Ç –¥–ª—è PK/FK
- –í—Ç–æ—Ä–æ–π **ax.text()** - —Ç–∏–ø –¥–∞–Ω–Ω—ã—Ö —Å–ø—Ä–∞–≤–∞:
  - –ö—É—Ä—Å–∏–≤ (italic)
  - –°–µ—Ä—ã–π —Ü–≤–µ—Ç
  - –ú–µ–Ω—å—à–∏–π —Ä–∞–∑–º–µ—Ä —à—Ä–∏—Ñ—Ç–∞

### –û—Ç—Ä–∏—Å–æ–≤–∫–∞ —Å–≤—è–∑–µ–π –º–µ–∂–¥—É —Ç–∞–±–ª–∏—Ü–∞–º–∏

```python
for rel in relationships:
    from_table = rel['from_table']
    to_table = rel['to_table']
    
    if from_table in table_boxes and to_table in table_boxes:
        from_box = table_boxes[from_table]
        to_box = table_boxes[to_table]
        
        # –û–ø—Ä–µ–¥–µ–ª—è–µ–º —Ç–æ—á–∫–∏ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è
        dx = to_center_x - from_center_x
        dy = to_center_y - from_center_y
        
        # –ì–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª—å–Ω–æ–µ —Ä–∞—Å—Å—Ç–æ—è–Ω–∏–µ –±–æ–ª—å—à–µ –≤–µ—Ä—Ç–∏–∫–∞–ª—å–Ω–æ–≥–æ
        if abs(dx) > abs(dy):
            if dx > 0:  # –¶–µ–ª–µ–≤–∞—è —Ç–∞–±–ª–∏—Ü–∞ —Å–ø—Ä–∞–≤–∞
                from_x = from_box['x'] + from_box['width']
                from_y = from_center_y
                to_x = to_box['x']
                to_y = to_center_y
```

**–ü–æ—è—Å–Ω–µ–Ω–∏—è:**
- **for rel in relationships** - –ø–µ—Ä–µ–±–æ—Ä –≤—Å–µ—Ö —Å–≤—è–∑–µ–π
- **from_table, to_table** - —Ç–∞–±–ª–∏—Ü—ã, –º–µ–∂–¥—É –∫–æ—Ç–æ—Ä—ã–º–∏ —Å–≤—è–∑—å
- **dx, dy** - —Ä–∞–∑–Ω–∏—Ü–∞ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç –º–µ–∂–¥—É —Ü–µ–Ω—Ç—Ä–∞–º–∏ —Ç–∞–±–ª–∏—Ü
- **if abs(dx) > abs(dy)** - –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Å–≤—è–∑–∏:
  - –ï—Å–ª–∏ –≥–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª—å–Ω–æ–µ —Ä–∞—Å—Å—Ç–æ—è–Ω–∏–µ –±–æ–ª—å—à–µ - —Å–≤—è–∑—å –≥–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª—å–Ω–∞—è
  - –ï—Å–ª–∏ –≤–µ—Ä—Ç–∏–∫–∞–ª—å–Ω–æ–µ - —Å–≤—è–∑—å –≤–µ—Ä—Ç–∏–∫–∞–ª—å–Ω–∞—è
- **from_x, from_y** - —Ç–æ—á–∫–∞ –≤—ã—Ö–æ–¥–∞ —Å—Ç—Ä–µ–ª–∫–∏ –∏–∑ –∏—Å—Ö–æ–¥–Ω–æ–π —Ç–∞–±–ª–∏—Ü—ã
- **to_x, to_y** - —Ç–æ—á–∫–∞ –≤—Ö–æ–¥–∞ —Å—Ç—Ä–µ–ª–∫–∏ –≤ —Ü–µ–ª–µ–≤—É—é —Ç–∞–±–ª–∏—Ü—É

**–õ–æ–≥–∏–∫–∞ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è —Ç–æ—á–µ–∫:**
- –ï—Å–ª–∏ —Ü–µ–ª–µ–≤–∞—è —Ç–∞–±–ª–∏—Ü–∞ —Å–ø—Ä–∞–≤–∞ - —Å—Ç—Ä–µ–ª–∫–∞ –≤—ã—Ö–æ–¥–∏—Ç —Å–ø—Ä–∞–≤–∞ –∏—Å—Ö–æ–¥–Ω–æ–π, –≤—Ö–æ–¥–∏—Ç —Å–ª–µ–≤–∞ —Ü–µ–ª–µ–≤–æ–π
- –ï—Å–ª–∏ —Å–ª–µ–≤–∞ - –Ω–∞–æ–±–æ—Ä–æ—Ç
- –ï—Å–ª–∏ –≤—ã—à–µ/–Ω–∏–∂–µ - –∞–Ω–∞–ª–æ–≥–∏—á–Ω–æ –ø–æ –≤–µ—Ä—Ç–∏–∫–∞–ª–∏

### –û—Ç—Ä–∏—Å–æ–≤–∫–∞ —Å—Ç—Ä–µ–ª–∫–∏ —Å–≤—è–∑–∏

```python
arrow = FancyArrowPatch(
    (from_x, from_y), (to_x, to_y),
    arrowstyle='->', mutation_scale=25,
    color=line_color, linewidth=2.5,
    zorder=0, alpha=0.7,
    connectionstyle="arc3,rad=0.2"
)
ax.add_patch(arrow)
```

**–ü–æ—è—Å–Ω–µ–Ω–∏—è:**
- **FancyArrowPatch** - —Å–æ–∑–¥–∞–Ω–∏–µ —Å—Ç—Ä–µ–ª–∫–∏
- **(from_x, from_y), (to_x, to_y)** - –Ω–∞—á–∞–ª—å–Ω–∞—è –∏ –∫–æ–Ω–µ—á–Ω–∞—è —Ç–æ—á–∫–∏
- **arrowstyle='->'** - —Å—Ç–∏–ª—å —Å—Ç—Ä–µ–ª–∫–∏ (–æ–±—ã—á–Ω–∞—è —Å—Ç—Ä–µ–ª–∫–∞)
- **mutation_scale=25** - —Ä–∞–∑–º–µ—Ä –Ω–∞–∫–æ–Ω–µ—á–Ω–∏–∫–∞ —Å—Ç—Ä–µ–ª–∫–∏
- **connectionstyle="arc3,rad=0.2"** - –∏–∑–æ–≥–Ω—É—Ç–∞—è –ª–∏–Ω–∏—è –¥–ª—è –ª—É—á—à–µ–π —á–∏—Ç–∞–µ–º–æ—Å—Ç–∏
  - –ò–∑–±–µ–≥–∞–µ—Ç –ø–µ—Ä–µ—Å–µ—á–µ–Ω–∏–π —Å –¥—Ä—É–≥–∏–º–∏ —ç–ª–µ–º–µ–Ω—Ç–∞–º–∏

### –ó–∞–≥–æ–ª–æ–≤–æ–∫ –¥–∏–∞–≥—Ä–∞–º–º—ã

```python
ax.text(9, 11, 'ER-–¥–∏–∞–≥—Ä–∞–º–º–∞ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö –ø—Ä–æ–∏–∑–≤–æ–¥—Å—Ç–≤–∞',
       ha='center', va='center', fontsize=20, fontweight='bold',
       color=text_color)
```

**–ü–æ—è—Å–Ω–µ–Ω–∏—è:**
- –¢–µ–∫—Å—Ç –∑–∞–≥–æ–ª–æ–≤–∫–∞ –≤–≤–µ—Ä—Ö—É –¥–∏–∞–≥—Ä–∞–º–º—ã
- –ö–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã (9, 11) - —Ü–µ–Ω—Ç—Ä –ø–æ –≥–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª–∏, –≤–≤–µ—Ä—Ö—É –ø–æ –≤–µ—Ä—Ç–∏–∫–∞–ª–∏
- –ë–æ–ª—å—à–æ–π —Ä–∞–∑–º–µ—Ä —à—Ä–∏—Ñ—Ç–∞ (20) –∏ –∂–∏—Ä–Ω—ã–π —Å—Ç–∏–ª—å

### –õ–µ–≥–µ–Ω–¥–∞

```python
legend_elements = [
    mpatches.Patch(color=pk_color, label='–ü–µ—Ä–≤–∏—á–Ω—ã–π –∫–ª—é—á (PK)'),
    mpatches.Patch(color=fk_color, label='–í–Ω–µ—à–Ω–∏–π –∫–ª—é—á (FK)'),
    mpatches.Patch(color=table_bg, label='–û–±—ã—á–Ω–æ–µ –ø–æ–ª–µ')
]
ax.legend(handles=legend_elements, loc='upper right', 
         frameon=True, fancybox=True, shadow=True)
```

**–ü–æ—è—Å–Ω–µ–Ω–∏—è:**
- **mpatches.Patch** - —Å–æ–∑–¥–∞–Ω–∏–µ —Ü–≤–µ—Ç–Ω—ã—Ö –∫–≤–∞–¥—Ä–∞—Ç–æ–≤ –¥–ª—è –ª–µ–≥–µ–Ω–¥—ã
- **ax.legend()** - –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ –ª–µ–≥–µ–Ω–¥—ã –Ω–∞ –≥—Ä–∞—Ñ–∏–∫
- **loc='upper right'** - —Ä–∞—Å–ø–æ–ª–æ–∂–µ–Ω–∏–µ –≤ –ø—Ä–∞–≤–æ–º –≤–µ—Ä—Ö–Ω–µ–º —É–≥–ª—É
- **frameon, fancybox, shadow** - —Å—Ç–∏–ª–∏–∑–∞—Ü–∏—è —Ä–∞–º–∫–∏ –ª–µ–≥–µ–Ω–¥—ã

### –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –≤ PDF

```python
pdf_path = 'ER_diagram.pdf'
plt.tight_layout(pad=1.0)
plt.savefig(pdf_path, format='pdf', bbox_inches='tight', 
            dpi=300, facecolor='white', edgecolor='none')
print(f"ER-–¥–∏–∞–≥—Ä–∞–º–º–∞ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∞: {pdf_path}")
plt.close()
```

**–ü–æ—è—Å–Ω–µ–Ω–∏—è:**
- **plt.tight_layout()** - –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ –æ—Ç—Å—Ç—É–ø–æ–≤
- **plt.savefig()** - —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —Ñ–∏–≥—É—Ä—ã –≤ —Ñ–∞–π–ª:
  - **format='pdf'** - —Ñ–æ—Ä–º–∞—Ç PDF
  - **bbox_inches='tight'** - –æ–±—Ä–µ–∑–∫–∞ –ø—É—Å—Ç—ã—Ö –æ–±–ª–∞—Å—Ç–µ–π
  - **dpi=300** - –≤—ã—Å–æ–∫–æ–µ —Ä–∞–∑—Ä–µ—à–µ–Ω–∏–µ (300 —Ç–æ—á–µ–∫ –Ω–∞ –¥—é–π–º)
  - **facecolor='white'** - –±–µ–ª—ã–π —Ñ–æ–Ω
- **plt.close()** - –∑–∞–∫—Ä—ã—Ç–∏–µ —Ñ–∏–≥—É—Ä—ã –∏ –æ—Å–≤–æ–±–æ–∂–¥–µ–Ω–∏–µ –ø–∞–º—è—Ç–∏

---

## üîÑ –ö–∞–∫ –≤—Å–µ —Ä–∞–±–æ—Ç–∞–µ—Ç –≤–º–µ—Å—Ç–µ

### –ü—Ä–æ—Ü–µ—Å—Å —Å–æ–∑–¥–∞–Ω–∏—è –ë–î:

1. **–ó–∞–ø—É—Å–∫ —Å–∫—Ä–∏–ø—Ç–∞:** `python create_database.py`
2. **–°–æ–∑–¥–∞–Ω–∏–µ –ë–î:** SQLite —Å–æ–∑–¥–∞–µ—Ç —Ñ–∞–π–ª `production_db.sqlite`
3. **–°–æ–∑–¥–∞–Ω–∏–µ —Ç–∞–±–ª–∏—Ü:** –í—ã–ø–æ–ª–Ω—è—é—Ç—Å—è CREATE TABLE –∫–æ–º–∞–Ω–¥—ã
4. **–ò–º–ø–æ—Ä—Ç –¥–∞–Ω–Ω—ã—Ö:** –ß—Ç–µ–Ω–∏–µ Excel —Ñ–∞–π–ª–æ–≤ –∏ –≤—Å—Ç–∞–≤–∫–∞ –¥–∞–Ω–Ω—ã—Ö
5. **–†–∞–∑—Ä–µ—à–µ–Ω–∏–µ —Å–≤—è–∑–µ–π:** –ü–æ–∏—Å–∫ ID –ø–æ –∏–º–µ–Ω–∞–º –¥–ª—è –≤–Ω–µ—à–Ω–∏—Ö –∫–ª—é—á–µ–π
6. **–°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ:** commit() –∑–∞–ø–∏—Å—ã–≤–∞–µ—Ç –≤—Å–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è –Ω–∞ –¥–∏—Å–∫
7. **–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞:** –í—ã–≤–æ–¥ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ –∑–∞–ø–∏—Å–µ–π –≤ –∫–∞–∂–¥–æ–π —Ç–∞–±–ª–∏—Ü–µ

### –ü—Ä–æ—Ü–µ—Å—Å —Å–æ–∑–¥–∞–Ω–∏—è ER-–¥–∏–∞–≥—Ä–∞–º–º—ã:

1. **–ó–∞–ø—É—Å–∫ —Å–∫—Ä–∏–ø—Ç–∞:** `python create_er_diagram.py`
2. **–ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ –ë–î:** –ß—Ç–µ–Ω–∏–µ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–π –ë–î
3. **–ü–æ–ª—É—á–µ–Ω–∏–µ –º–µ—Ç–∞–¥–∞–Ω–Ω—ã—Ö:** –°–ø–∏—Å–æ–∫ —Ç–∞–±–ª–∏—Ü, –∫–æ–ª–æ–Ω–æ–∫, —Å–≤—è–∑–µ–π
4. **–û—Ç—Ä–∏—Å–æ–≤–∫–∞:** –°–æ–∑–¥–∞–Ω–∏–µ –≤–∏–∑—É–∞–ª—å–Ω—ã—Ö —ç–ª–µ–º–µ–Ω—Ç–æ–≤ (—Ç–∞–±–ª–∏—Ü—ã, —Å—Ç—Ä–µ–ª–∫–∏)
5. **–°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ:** –≠–∫—Å–ø–æ—Ä—Ç –≤ PDF —Ñ–∞–π–ª

---

## ‚úÖ –ö–ª—é—á–µ–≤—ã–µ –∫–æ–Ω—Ü–µ–ø—Ü–∏–∏

### 1. SQL –∏ SQLite
- SQL (Structured Query Language) - —è–∑—ã–∫ –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –ë–î
- SQLite - –≤—Å—Ç—Ä–∞–∏–≤–∞–µ–º–∞—è –ë–î, —Ö—Ä–∞–Ω–∏—Ç—Å—è –≤ –æ–¥–Ω–æ–º —Ñ–∞–π–ª–µ
- –ö—É—Ä—Å–æ—Ä - –æ–±—ä–µ–∫—Ç –¥–ª—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è SQL –∫–æ–º–∞–Ω–¥

### 2. –¢—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏
- –ò–∑–º–µ–Ω–µ–Ω–∏—è –≤ –ë–î –Ω–µ —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏
- `commit()` - —è–≤–Ω–æ–µ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –≤—Å–µ—Ö –∏–∑–º–µ–Ω–µ–Ω–∏–π
- –ë–µ–∑ commit() –∏–∑–º–µ–Ω–µ–Ω–∏—è —Ç–µ—Ä—è—é—Ç—Å—è –ø—Ä–∏ –∑–∞–∫—Ä—ã—Ç–∏–∏ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è

### 3. –í–Ω–µ—à–Ω–∏–µ –∫–ª—é—á–∏ (Foreign Keys)
- –û–±–µ—Å–ø–µ—á–∏–≤–∞—é—Ç —Ü–µ–ª–æ—Å—Ç–Ω–æ—Å—Ç—å –¥–∞–Ω–Ω—ã—Ö
- –°–≤—è–∑—ã–≤–∞—é—Ç —Ç–∞–±–ª–∏—Ü—ã –º–µ–∂–¥—É —Å–æ–±–æ–π
- –ù–µ–ª—å–∑—è —Å–æ–∑–¥–∞—Ç—å –∑–∞–ø–∏—Å—å —Å –Ω–µ—Å—É—â–µ—Å—Ç–≤—É—é—â–∏–º –≤–Ω–µ—à–Ω–∏–º –∫–ª—é—á–æ–º

### 4. –†–∞–∑—Ä–µ—à–µ–Ω–∏–µ —Å–≤—è–∑–µ–π
- –í Excel —É–∫–∞–∑–∞–Ω—ã –∏–º–µ–Ω–∞ (–Ω–∞–ø—Ä–∏–º–µ—Ä, "–ú–µ–±–µ–ª—å")
- –í –ë–î –Ω—É–∂–Ω—ã ID (–Ω–∞–ø—Ä–∏–º–µ—Ä, 1)
- –ü–æ–∏—Å–∫ ID –ø–æ –∏–º–µ–Ω–∏ –ø–µ—Ä–µ–¥ –≤—Å—Ç–∞–≤–∫–æ–π

### 5. –í–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö
- matplotlib - –±–∏–±–ª–∏–æ—Ç–µ–∫–∞ –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –≥—Ä–∞—Ñ–∏–∫–æ–≤
- ER-–¥–∏–∞–≥—Ä–∞–º–º–∞ - –≤–∏–∑—É–∞–ª—å–Ω–æ–µ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏–µ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –ë–î
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –≥–µ–Ω–µ—Ä–∞—Ü–∏—è –Ω–∞ –æ—Å–Ω–æ–≤–µ –º–µ—Ç–∞–¥–∞–Ω–Ω—ã—Ö –ë–î

---

**–î–æ–∫—É–º–µ–Ω—Ç —Å–æ–∑–¥–∞–Ω –¥–ª—è –ø–æ–Ω–∏–º–∞–Ω–∏—è —Ä–∞–±–æ—Ç—ã —Å–∫—Ä–∏–ø—Ç–æ–≤ —Å–æ–∑–¥–∞–Ω–∏—è –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö.**

