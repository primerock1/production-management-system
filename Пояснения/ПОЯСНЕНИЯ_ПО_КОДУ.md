# –ü–æ—è—Å–Ω–µ–Ω–∏—è –ø–æ –∫–æ–¥—É –ø—Ä–æ–µ–∫—Ç–∞

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∞

–≠—Ç–æ—Ç –¥–æ–∫—É–º–µ–Ω—Ç —Å–æ–¥–µ—Ä–∂–∏—Ç –ø–æ–¥—Ä–æ–±–Ω—ã–µ –ø–æ—è—Å–Ω–µ–Ω–∏—è –¥–ª—è –∫–∞–∂–¥–æ–≥–æ —Ñ–∞–π–ª–∞ –ø—Ä–æ–µ–∫—Ç–∞ –∏ –∫–∞–∂–¥–æ–≥–æ –±–ª–æ–∫–∞ –∫–æ–¥–∞ –≤–Ω—É—Ç—Ä–∏ —Ñ–∞–π–ª–æ–≤.

---

## üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
backend/
‚îú‚îÄ‚îÄ app/
‚îÇ   ‚îú‚îÄ‚îÄ main.py              # –ì–ª–∞–≤–Ω—ã–π —Ñ–∞–π–ª –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
‚îÇ   ‚îú‚îÄ‚îÄ config.py            # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
‚îÇ   ‚îú‚îÄ‚îÄ database.py          # –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ –ë–î
‚îÇ   ‚îú‚îÄ‚îÄ models/              # –ú–æ–¥–µ–ª–∏ SQLAlchemy
‚îÇ   ‚îú‚îÄ‚îÄ schemas/             # –°—Ö–µ–º—ã Pydantic
‚îÇ   ‚îî‚îÄ‚îÄ routers/             # API —Ä–æ—É—Ç–µ—Ä—ã
‚îú‚îÄ‚îÄ run.py                   # –°–∫—Ä–∏–ø—Ç –∑–∞–ø—É—Å–∫–∞
‚îî‚îÄ‚îÄ requirements.txt         # –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
```

---

## üìÑ –§–∞–π–ª: `backend/app/main.py`

**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –ì–ª–∞–≤–Ω—ã–π —Ñ–∞–π–ª –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è FastAPI. –¢–æ—á–∫–∞ –≤—Ö–æ–¥–∞, –≥–¥–µ —Å–æ–∑–¥–∞–µ—Ç—Å—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –∏ –ø–æ–¥–∫–ª—é—á–∞—é—Ç—Å—è –≤—Å–µ —Ä–æ—É—Ç–µ—Ä—ã.

### –ò–º–ø–æ—Ä—Ç—ã

```python
from fastapi import FastAPI
from fastapi.middleware.cors import CORSMiddleware
```
- **FastAPI** - –æ—Å–Ω–æ–≤–Ω–æ–π –∫–ª–∞—Å—Å –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
- **CORSMiddleware** - middleware –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ CORS (Cross-Origin Resource Sharing) –∑–∞–ø—Ä–æ—Å–æ–≤

```python
from app.routers import (
    material_type,
    product_type,
    workshop,
    product,
    product_workshop,
)
```
- –ò–º–ø–æ—Ä—Ç–∏—Ä—É–µ–º –≤—Å–µ —Ä–æ—É—Ç–µ—Ä—ã –∏–∑ –ø–∞–ø–∫–∏ `routers`
- –ö–∞–∂–¥—ã–π —Ä–æ—É—Ç–µ—Ä –æ—Ç–≤–µ—á–∞–µ—Ç –∑–∞ —Å–≤–æ–π –º–æ–¥—É–ª—å (—Ç–∞–±–ª–∏—Ü—É –ë–î)

### –°–æ–∑–¥–∞–Ω–∏–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è

```python
app = FastAPI(
    title="Production Management API",
    description="API –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ø—Ä–æ–∏–∑–≤–æ–¥—Å—Ç–≤–æ–º",
    version="1.0.0",
)
```
- **app** - —ç–∫–∑–µ–º–ø–ª—è—Ä –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è FastAPI
- **title** - –Ω–∞–∑–≤–∞–Ω–∏–µ API (–æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è –≤ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏)
- **description** - –æ–ø–∏—Å–∞–Ω–∏–µ API
- **version** - –≤–µ—Ä—Å–∏—è API

### –ù–∞—Å—Ç—Ä–æ–π–∫–∞ CORS

```python
app.add_middleware(
    CORSMiddleware,
    allow_origins=["*"],  # –í –ø—Ä–æ–¥–∞–∫—à–µ–Ω–µ —É–∫–∞–∑–∞—Ç—å –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–µ –¥–æ–º–µ–Ω—ã
    allow_credentials=True,
    allow_methods=["*"],
    allow_headers=["*"],
)
```
- **CORSMiddleware** - –ø–æ–∑–≤–æ–ª—è–µ—Ç –¥–µ–ª–∞—Ç—å –∑–∞–ø—Ä–æ—Å—ã —Å –¥—Ä—É–≥–∏—Ö –¥–æ–º–µ–Ω–æ–≤
- **allow_origins=["*"]** - —Ä–∞–∑—Ä–µ—à–∞–µ—Ç –∑–∞–ø—Ä–æ—Å—ã —Å –ª—é–±—ã—Ö –¥–æ–º–µ–Ω–æ–≤ (–¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏)
- **allow_credentials=True** - —Ä–∞–∑—Ä–µ—à–∞–µ—Ç –æ—Ç–ø—Ä–∞–≤–∫—É cookies
- **allow_methods=["*"]** - —Ä–∞–∑—Ä–µ—à–∞–µ—Ç –≤—Å–µ HTTP –º–µ—Ç–æ–¥—ã (GET, POST, PUT, DELETE)
- **allow_headers=["*"]** - —Ä–∞–∑—Ä–µ—à–∞–µ—Ç –≤—Å–µ –∑–∞–≥–æ–ª–æ–≤–∫–∏

**–í–∞–∂–Ω–æ:** –í –ø—Ä–æ–¥–∞–∫—à–µ–Ω–µ –Ω—É–∂–Ω–æ —É–∫–∞–∑–∞—Ç—å –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–µ –¥–æ–º–µ–Ω—ã –≤–º–µ—Å—Ç–æ "*"

### –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ —Ä–æ—É—Ç–µ—Ä–æ–≤

```python
app.include_router(material_type.router)
app.include_router(product_type.router)
app.include_router(workshop.router)
app.include_router(product.router)
app.include_router(product_workshop.router)
```
- **include_router** - –ø–æ–¥–∫–ª—é—á–∞–µ—Ç —Ä–æ—É—Ç–µ—Ä –∫ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—é
- –ö–∞–∂–¥—ã–π —Ä–æ—É—Ç–µ—Ä –¥–æ–±–∞–≤–ª—è–µ—Ç —Å–≤–æ–∏ endpoints –∫ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—é
- –í—Å–µ endpoints –∏–∑ —Ä–æ—É—Ç–µ—Ä–∞ —Å—Ç–∞–Ω–æ–≤—è—Ç—Å—è –¥–æ—Å—Ç—É–ø–Ω—ã–º–∏ —á–µ—Ä–µ–∑ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ

### –ö–æ—Ä–Ω–µ–≤–æ–π endpoint

```python
@app.get("/")
def root():
    """–ö–æ—Ä–Ω–µ–≤–æ–π endpoint"""
    return {
        "message": "Production Management API",
        "version": "1.0.0",
        "docs": "/docs",
        "endpoints": {
            "material_types": "/api/material-types",
            "product_types": "/api/product-types",
            "workshops": "/api/workshops",
            "products": "/api/products",
            "product_workshops": "/api/product-workshops",
        }
    }
```
- **@app.get("/")** - –¥–µ–∫–æ—Ä–∞—Ç–æ—Ä, –æ–ø—Ä–µ–¥–µ–ª—è—é—â–∏–π GET endpoint –ø–æ –ø—É—Ç–∏ "/"
- **root()** - —Ñ—É–Ω–∫—Ü–∏—è, –∫–æ—Ç–æ—Ä–∞—è –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è –ø—Ä–∏ –æ–±—Ä–∞—â–µ–Ω–∏–∏ –∫ –∫–æ—Ä–Ω—é API
- –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç JSON —Å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–µ–π –æ–± API –∏ –¥–æ—Å—Ç—É–ø–Ω—ã—Ö endpoints
- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ —Ä–∞–±–æ—Ç—ã API

### Health check endpoint

```python
@app.get("/health")
def health_check():
    """–ü—Ä–æ–≤–µ—Ä–∫–∞ –∑–¥–æ—Ä–æ–≤—å—è API"""
    return {"status": "ok"}
```
- **/health** - —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π endpoint –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ —Ä–∞–±–æ—Ç–æ—Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏ API
- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–æ–≤—ã–º–∏ —Å–∏—Å—Ç–µ–º–∞–º–∏
- –ü—Ä–æ—Å—Ç–æ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Å—Ç–∞—Ç—É—Å "ok", –µ—Å–ª–∏ API —Ä–∞–±–æ—Ç–∞–µ—Ç

---

## üìÑ –§–∞–π–ª: `backend/app/config.py`

**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–µ–π –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è. –•—Ä–∞–Ω–∏—Ç –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –ë–î, —Å–µ—Ä–≤–µ—Ä–∞ –∏ –¥—Ä—É–≥–∏–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã.

### –ò–º–ø–æ—Ä—Ç—ã

```python
from pydantic_settings import BaseSettings
from pathlib import Path
import os
```
- **BaseSettings** - –±–∞–∑–æ–≤—ã–π –∫–ª–∞—Å—Å –∏–∑ Pydantic –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –Ω–∞—Å—Ç—Ä–æ–π–∫–∞–º–∏
- **Path** - –∫–ª–∞—Å—Å –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –ø—É—Ç—è–º–∏ –∫ —Ñ–∞–π–ª–∞–º
- **os** - –º–æ–¥—É–ª—å –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –æ–ø–µ—Ä–∞—Ü–∏–æ–Ω–Ω–æ–π —Å–∏—Å—Ç–µ–º–æ–π

### –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –ø—É—Ç–∏ –∫ –ë–î

```python
BASE_DIR = Path(__file__).resolve().parent.parent.parent
DB_PATH = BASE_DIR / "production_db.sqlite"
```
- **__file__** - –ø—É—Ç—å –∫ —Ç–µ–∫—É—â–µ–º—É —Ñ–∞–π–ª—É (config.py)
- **resolve()** - –ø—Ä–µ–æ–±—Ä–∞–∑—É–µ—Ç –æ—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω—ã–π –ø—É—Ç—å –≤ –∞–±—Å–æ–ª—é—Ç–Ω—ã–π
- **parent** - —Ä–æ–¥–∏—Ç–µ–ª—å—Å–∫–∞—è –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—è
- **parent.parent.parent** - –ø–æ–¥–Ω–∏–º–∞–µ–º—Å—è –Ω–∞ 3 —É—Ä–æ–≤–Ω—è –≤–≤–µ—Ä—Ö (–∏–∑ app/config.py –≤ –∫–æ—Ä–µ–Ω—å –ø—Ä–æ–µ–∫—Ç–∞)
- **DB_PATH** - –ø–æ–ª–Ω—ã–π –ø—É—Ç—å –∫ —Ñ–∞–π–ª—É –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö

**–ü—Ä–∏–º–µ—Ä:** –ï—Å–ª–∏ config.py –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –≤ `backend/app/config.py`, —Ç–æ:
- `parent` = `backend/app/`
- `parent.parent` = `backend/`
- `parent.parent.parent` = –∫–æ—Ä–µ–Ω—å –ø—Ä–æ–µ–∫—Ç–∞
- `DB_PATH` = `–∫–æ—Ä–µ–Ω—å_–ø—Ä–æ–µ–∫—Ç–∞/production_db.sqlite`

### –ö–ª–∞—Å—Å Settings

```python
class Settings(BaseSettings):
    """–ù–∞—Å—Ç—Ä–æ–π–∫–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è"""
    
    # Database (–ø—É—Ç—å –∫ –ë–î –≤ –∫–æ—Ä–Ω–µ –ø—Ä–æ–µ–∫—Ç–∞)
    DATABASE_URL: str = f"sqlite:///{DB_PATH}"
    
    # Server
    HOST: str = "0.0.0.0"
    PORT: int = 8000
```
- **Settings** - –∫–ª–∞—Å—Å –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è –Ω–∞—Å—Ç—Ä–æ–µ–∫
- **BaseSettings** - –Ω–∞—Å–ª–µ–¥—É–µ—Ç—Å—è –æ—Ç Pydantic BaseSettings –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–π –≤–∞–ª–∏–¥–∞—Ü–∏–∏
- **DATABASE_URL** - —Å—Ç—Ä–æ–∫–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ –ë–î –≤ —Ñ–æ—Ä–º–∞—Ç–µ SQLAlchemy
  - `sqlite:///` - –ø—Ä–æ—Ç–æ–∫–æ–ª –¥–ª—è SQLite
  - `{DB_PATH}` - –ø—É—Ç—å –∫ —Ñ–∞–π–ª—É –ë–î
- **HOST** - –∞–¥—Ä–µ—Å, –Ω–∞ –∫–æ—Ç–æ—Ä–æ–º –±—É–¥–µ—Ç –∑–∞–ø—É—â–µ–Ω —Å–µ—Ä–≤–µ—Ä
  - `"0.0.0.0"` - —Å–ª—É—à–∞—Ç—å –Ω–∞ –≤—Å–µ—Ö –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞—Ö (–º–æ–∂–Ω–æ –∑–∞–º–µ–Ω–∏—Ç—å –Ω–∞ "127.0.0.1" –¥–ª—è localhost)
- **PORT** - –ø–æ—Ä—Ç –¥–ª—è –∑–∞–ø—É—Å–∫–∞ —Å–µ—Ä–≤–µ—Ä–∞ (8000)

### –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –∫–ª–∞—Å—Å–∞

```python
class Config:
    env_file = ".env"
    env_file_encoding = "utf-8"
    case_sensitive = True
```
- **Config** - –≤–ª–æ–∂–µ–Ω–Ω—ã–π –∫–ª–∞—Å—Å –¥–ª—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –ø–æ–≤–µ–¥–µ–Ω–∏—è Pydantic
- **env_file** - –∏–º—è —Ñ–∞–π–ª–∞ —Å –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–º–∏ –æ–∫—Ä—É–∂–µ–Ω–∏—è (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
- **env_file_encoding** - –∫–æ–¥–∏—Ä–æ–≤–∫–∞ —Ñ–∞–π–ª–∞ .env
- **case_sensitive** - —á—É–≤—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –∫ —Ä–µ–≥–∏—Å—Ç—Ä—É (True = "PORT" –∏ "port" —Ä–∞–∑–Ω—ã–µ)

### –°–æ–∑–¥–∞–Ω–∏–µ —ç–∫–∑–µ–º–ø–ª—è—Ä–∞ –Ω–∞—Å—Ç—Ä–æ–µ–∫

```python
settings = Settings()
```
- –°–æ–∑–¥–∞–µ—Ç—Å—è –≥–ª–æ–±–∞–ª—å–Ω—ã–π —ç–∫–∑–µ–º–ø–ª—è—Ä –Ω–∞—Å—Ç—Ä–æ–µ–∫
- –ú–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –≤ –¥—Ä—É–≥–∏—Ö –º–æ–¥—É–ª—è—Ö —á–µ—Ä–µ–∑ `from app.config import settings`
- –ü—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –∏–∑ .env —Ñ–∞–π–ª–∞ (–µ—Å–ª–∏ –µ—Å—Ç—å)

---

## üìÑ –§–∞–π–ª: `backend/app/database.py`

**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö —á–µ—Ä–µ–∑ SQLAlchemy.

### –ò–º–ø–æ—Ä—Ç—ã

```python
from sqlalchemy import create_engine
from sqlalchemy.ext.declarative import declarative_base
from sqlalchemy.orm import sessionmaker
from app.config import settings
```
- **create_engine** - —Ñ—É–Ω–∫—Ü–∏—è –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –¥–≤–∏–∂–∫–∞ –ë–î
- **declarative_base** - –±–∞–∑–æ–≤—ã–π –∫–ª–∞—Å—Å –¥–ª—è –º–æ–¥–µ–ª–µ–π SQLAlchemy
- **sessionmaker** - —Ñ–∞–±—Ä–∏–∫–∞ –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è —Å–µ—Å—Å–∏–π –ë–î
- **settings** - –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è (–æ—Ç–∫—É–¥–∞ –±–µ—Ä–µ–º DATABASE_URL)

### –°–æ–∑–¥–∞–Ω–∏–µ –¥–≤–∏–∂–∫–∞ –ë–î

```python
engine = create_engine(
    settings.DATABASE_URL,
    connect_args={"check_same_thread": False}  # –î–ª—è SQLite
)
```
- **create_engine** - —Å–æ–∑–¥–∞–µ—Ç –¥–≤–∏–∂–æ–∫ –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –ë–î
- **settings.DATABASE_URL** - —Å—Ç—Ä–æ–∫–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∏–∑ –Ω–∞—Å—Ç—Ä–æ–µ–∫
- **connect_args** - –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è
- **check_same_thread=False** - –æ—Ç–∫–ª—é—á–∞–µ—Ç –ø—Ä–æ–≤–µ—Ä–∫—É –æ–¥–Ω–æ–≥–æ –ø–æ—Ç–æ–∫–∞ –¥–ª—è SQLite
  - –ù—É–∂–Ω–æ –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å FastAPI (–º–Ω–æ–≥–æ–ø–æ—Ç–æ—á–Ω–æ—Å—Ç—å)

### –°–æ–∑–¥–∞–Ω–∏–µ —Ñ–∞–±—Ä–∏–∫–∏ —Å–µ—Å—Å–∏–π

```python
SessionLocal = sessionmaker(autocommit=False, autoflush=False, bind=engine)
```
- **sessionmaker** - —Å–æ–∑–¥–∞–µ—Ç –∫–ª–∞—Å—Å –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è —Å–µ—Å—Å–∏–π
- **autocommit=False** - –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π commit –æ—Ç–∫–ª—é—á–µ–Ω (–Ω—É–∂–Ω–æ –¥–µ–ª–∞—Ç—å –≤—Ä—É—á–Ω—É—é)
- **autoflush=False** - –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π flush –æ—Ç–∫–ª—é—á–µ–Ω
- **bind=engine** - –ø—Ä–∏–≤—è–∑–∫–∞ –∫ —Å–æ–∑–¥–∞–Ω–Ω–æ–º—É –¥–≤–∏–∂–∫—É

**–°–µ—Å—Å–∏—è –ë–î** - —ç—Ç–æ –æ–±—ä–µ–∫—Ç, —á–µ—Ä–µ–∑ –∫–æ—Ç–æ—Ä—ã–π –≤—ã–ø–æ–ª–Ω—è—é—Ç—Å—è –≤—Å–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ —Å –ë–î

### –ë–∞–∑–æ–≤—ã–π –∫–ª–∞—Å—Å –¥–ª—è –º–æ–¥–µ–ª–µ–π

```python
Base = declarative_base()
```
- **Base** - –±–∞–∑–æ–≤—ã–π –∫–ª–∞—Å—Å, –æ—Ç –∫–æ—Ç–æ—Ä–æ–≥–æ –Ω–∞—Å–ª–µ–¥—É—é—Ç—Å—è –≤—Å–µ –º–æ–¥–µ–ª–∏
- –í—Å–µ –º–æ–¥–µ–ª–∏ –¥–æ–ª–∂–Ω—ã –Ω–∞—Å–ª–µ–¥–æ–≤–∞—Ç—å—Å—è –æ—Ç Base
- –ü–æ–∑–≤–æ–ª—è–µ—Ç SQLAlchemy –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–æ–∑–¥–∞–≤–∞—Ç—å —Ç–∞–±–ª–∏—Ü—ã

### –§—É–Ω–∫—Ü–∏—è –ø–æ–ª—É—á–µ–Ω–∏—è —Å–µ—Å—Å–∏–∏ –ë–î

```python
def get_db():
    """
    Dependency –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è —Å–µ—Å—Å–∏–∏ –ë–î
    """
    db = SessionLocal()
    try:
        yield db
    finally:
        db.close()
```
- **get_db()** - —Ñ—É–Ω–∫—Ü–∏—è-–≥–µ–Ω–µ—Ä–∞—Ç–æ—Ä (–∏—Å–ø–æ–ª—å–∑—É–µ—Ç yield)
- **Dependency** - –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è FastAPI –¥–ª—è dependency injection
- **db = SessionLocal()** - —Å–æ–∑–¥–∞–µ—Ç –Ω–æ–≤—É—é —Å–µ—Å—Å–∏—é –ë–î
- **yield db** - –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Å–µ—Å—Å–∏—é –∏ –∂–¥–µ—Ç –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è –∑–∞–ø—Ä–æ—Å–∞
- **finally: db.close()** - –≥–∞—Ä–∞–Ω—Ç–∏—Ä–æ–≤–∞–Ω–Ω–æ –∑–∞–∫—Ä—ã–≤–∞–µ—Ç —Å–µ—Å—Å–∏—é –ø–æ—Å–ª–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

**–ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç:**
1. –ü—Ä–∏ –∑–∞–ø—Ä–æ—Å–µ FastAPI –≤—ã–∑—ã–≤–∞–µ—Ç `get_db()`
2. –°–æ–∑–¥–∞–µ—Ç—Å—è —Å–µ—Å—Å–∏—è –ë–î
3. –°–µ—Å—Å–∏—è –ø–µ—Ä–µ–¥–∞–µ—Ç—Å—è –≤ endpoint
4. –ü–æ—Å–ª–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è endpoint —Å–µ—Å—Å–∏—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∑–∞–∫—Ä—ã–≤–∞–µ—Ç—Å—è

---

## üìÑ –§–∞–π–ª: `backend/app/models/material_type.py`

**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** SQLAlchemy –º–æ–¥–µ–ª—å –¥–ª—è —Ç–∞–±–ª–∏—Ü—ã `material_type` (—Ç–∏–ø—ã –º–∞—Ç–µ—Ä–∏–∞–ª–æ–≤).

### –ò–º–ø–æ—Ä—Ç—ã

```python
from sqlalchemy import Column, Integer, String, Float
from app.database import Base
```
- **Column** - –∫–ª–∞—Å—Å –¥–ª—è –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è –∫–æ–ª–æ–Ω–æ–∫ —Ç–∞–±–ª–∏—Ü—ã
- **Integer, String, Float** - —Ç–∏–ø—ã –¥–∞–Ω–Ω—ã—Ö SQLAlchemy
- **Base** - –±–∞–∑–æ–≤—ã–π –∫–ª–∞—Å—Å –¥–ª—è –º–æ–¥–µ–ª–µ–π

### –ö–ª–∞—Å—Å MaterialType

```python
class MaterialType(Base):
    """–¢–∏–ø –º–∞—Ç–µ—Ä–∏–∞–ª–∞"""
    __tablename__ = "material_type"
```
- **MaterialType** - –∫–ª–∞—Å—Å –º–æ–¥–µ–ª–∏, –Ω–∞—Å–ª–µ–¥—É–µ—Ç—Å—è –æ—Ç Base
- **__tablename__** - –∏–º—è —Ç–∞–±–ª–∏—Ü—ã –≤ –ë–î (–¥–æ–ª–∂–Ω–æ —Å–æ–≤–ø–∞–¥–∞—Ç—å —Å —Ä–µ–∞–ª—å–Ω–æ–π —Ç–∞–±–ª–∏—Ü–µ–π)

### –ü–æ–ª—è –º–æ–¥–µ–ª–∏

```python
id = Column(Integer, primary_key=True, index=True)
```
- **id** - –ø–µ—Ä–≤–∏—á–Ω—ã–π –∫–ª—é—á —Ç–∞–±–ª–∏—Ü—ã
- **Integer** - —Ç–∏–ø –¥–∞–Ω–Ω—ã—Ö (—Ü–µ–ª–æ–µ —á–∏—Å–ª–æ)
- **primary_key=True** - —ç—Ç–æ –ø–µ—Ä–≤–∏—á–Ω—ã–π –∫–ª—é—á
- **index=True** - —Å–æ–∑–¥–∞–µ—Ç—Å—è –∏–Ω–¥–µ–∫—Å –¥–ª—è –±—ã—Å—Ç—Ä–æ–≥–æ –ø–æ–∏—Å–∫–∞

```python
name = Column(String, unique=True, nullable=False, index=True)
```
- **name** - –Ω–∞–∑–≤–∞–Ω–∏–µ —Ç–∏–ø–∞ –º–∞—Ç–µ—Ä–∏–∞–ª–∞
- **String** - —Ç–∏–ø –¥–∞–Ω–Ω—ã—Ö (—Å—Ç—Ä–æ–∫–∞)
- **unique=True** - –∑–Ω–∞—á–µ–Ω–∏–µ –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å —É–Ω–∏–∫–∞–ª—å–Ω—ã–º (–Ω–µ–ª—å–∑—è —Å–æ–∑–¥–∞—Ç—å –¥–≤–∞ —Ç–∏–ø–∞ —Å –æ–¥–∏–Ω–∞–∫–æ–≤—ã–º –∏–º–µ–Ω–µ–º)
- **nullable=False** - –ø–æ–ª–µ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ –¥–ª—è –∑–∞–ø–æ–ª–Ω–µ–Ω–∏—è (NOT NULL)
- **index=True** - —Å–æ–∑–¥–∞–µ—Ç—Å—è –∏–Ω–¥–µ–∫—Å –¥–ª—è –±—ã—Å—Ç—Ä–æ–≥–æ –ø–æ–∏—Å–∫–∞ –ø–æ –∏–º–µ–Ω–∏

```python
loss_percentage = Column(Float, nullable=True)
```
- **loss_percentage** - –ø—Ä–æ—Ü–µ–Ω—Ç –ø–æ—Ç–µ—Ä—å —Å—ã—Ä—å—è
- **Float** - —Ç–∏–ø –¥–∞–Ω–Ω—ã—Ö (—á–∏—Å–ª–æ —Å –ø–ª–∞–≤–∞—é—â–µ–π —Ç–æ—á–∫–æ–π)
- **nullable=True** - –ø–æ–ª–µ –º–æ–∂–µ—Ç –±—ã—Ç—å –ø—É—Å—Ç—ã–º (NULL)

**–ò—Ç–æ–≥–æ:** –ú–æ–¥–µ–ª—å –æ–ø–∏—Å—ã–≤–∞–µ—Ç —Å—Ç—Ä—É–∫—Ç—É—Ä—É —Ç–∞–±–ª–∏—Ü—ã –∏ –ø–æ–∑–≤–æ–ª—è–µ—Ç —Ä–∞–±–æ—Ç–∞—Ç—å —Å –¥–∞–Ω–Ω—ã–º–∏ —á–µ—Ä–µ–∑ Python –æ–±—ä–µ–∫—Ç—ã –≤–º–µ—Å—Ç–æ SQL –∑–∞–ø—Ä–æ—Å–æ–≤.

---

## üìÑ –§–∞–π–ª: `backend/app/models/product_type.py`

**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** SQLAlchemy –º–æ–¥–µ–ª—å –¥–ª—è —Ç–∞–±–ª–∏—Ü—ã `product_type` (—Ç–∏–ø—ã –ø—Ä–æ–¥—É–∫—Ü–∏–∏).

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –∞–Ω–∞–ª–æ–≥–∏—á–Ω–∞ MaterialType

```python
class ProductType(Base):
    """–¢–∏–ø –ø—Ä–æ–¥—É–∫—Ü–∏–∏"""
    __tablename__ = "product_type"
    
    id = Column(Integer, primary_key=True, index=True)
    name = Column(String, unique=True, nullable=False, index=True)
    coefficient = Column(Float, nullable=True)
```

**–û—Ç–ª–∏—á–∏—è –æ—Ç MaterialType:**
- –¢–∞–±–ª–∏—Ü–∞ –Ω–∞–∑—ã–≤–∞–µ—Ç—Å—è `product_type`
- –í–º–µ—Å—Ç–æ `loss_percentage` –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è `coefficient` (–∫–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç —Ç–∏–ø–∞ –ø—Ä–æ–¥—É–∫—Ü–∏–∏)
- –û—Å—Ç–∞–ª—å–Ω–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –∏–¥–µ–Ω—Ç–∏—á–Ω–∞

---

## üìÑ –§–∞–π–ª: `backend/app/models/workshop.py`

**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** SQLAlchemy –º–æ–¥–µ–ª—å –¥–ª—è —Ç–∞–±–ª–∏—Ü—ã `workshops` (—Ü–µ—Ö–∞ –ø—Ä–æ–∏–∑–≤–æ–¥—Å—Ç–≤–∞).

```python
class Workshop(Base):
    """–¶–µ—Ö –ø—Ä–æ–∏–∑–≤–æ–¥—Å—Ç–≤–∞"""
    __tablename__ = "workshops"
    
    id = Column(Integer, primary_key=True, index=True)
    name = Column(String, unique=True, nullable=False, index=True)
    workshop_type = Column(String, nullable=True)
    staff_count = Column(Integer, nullable=True)
```

**–ü–æ–ª—è:**
- **id** - –ø–µ—Ä–≤–∏—á–Ω—ã–π –∫–ª—é—á
- **name** - –Ω–∞–∑–≤–∞–Ω–∏–µ —Ü–µ—Ö–∞ (—É–Ω–∏–∫–∞–ª—å–Ω–æ–µ, –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ–µ)
- **workshop_type** - —Ç–∏–ø —Ü–µ—Ö–∞ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ–µ)
- **staff_count** - –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–µ—Ä—Å–æ–Ω–∞–ª–∞ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ–µ, —Ü–µ–ª–æ–µ —á–∏—Å–ª–æ)

---

## üìÑ –§–∞–π–ª: `backend/app/models/product.py`

**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** SQLAlchemy –º–æ–¥–µ–ª—å –¥–ª—è —Ç–∞–±–ª–∏—Ü—ã `products` (–ø—Ä–æ–¥—É–∫—Ü–∏—è).

### –ò–º–ø–æ—Ä—Ç—ã

```python
from sqlalchemy import Column, Integer, String, Float, ForeignKey
from sqlalchemy.orm import relationship
```
- **ForeignKey** - –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –≤–Ω–µ—à–Ω–∏—Ö –∫–ª—é—á–µ–π
- **relationship** - –¥–ª—è –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è —Å–≤—è–∑–µ–π –º–µ–∂–¥—É –º–æ–¥–µ–ª—è–º–∏

### –ö–ª–∞—Å—Å Product

```python
class Product(Base):
    """–ü—Ä–æ–¥—É–∫—Ü–∏—è"""
    __tablename__ = "products"
    
    id = Column(Integer, primary_key=True, index=True)
    name = Column(String, nullable=False, index=True)
    product_type_id = Column(Integer, ForeignKey("product_type.id"), nullable=True)
    article = Column(String, nullable=True)
    min_price = Column(Float, nullable=True)
    main_material = Column(String, nullable=True)
```

**–ü–æ–ª—è:**
- **id** - –ø–µ—Ä–≤–∏—á–Ω—ã–π –∫–ª—é—á
- **name** - –Ω–∞–∑–≤–∞–Ω–∏–µ –ø—Ä–æ–¥—É–∫—Ü–∏–∏ (–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ–µ)
- **product_type_id** - –≤–Ω–µ—à–Ω–∏–π –∫–ª—é—á –Ω–∞ —Ç–∞–±–ª–∏—Ü—É `product_type`
  - **ForeignKey("product_type.id")** - —Å—Å—ã–ª–∫–∞ –Ω–∞ –ø–æ–ª–µ id –≤ —Ç–∞–±–ª–∏—Ü–µ product_type
- **article** - –∞—Ä—Ç–∏–∫—É–ª –ø—Ä–æ–¥—É–∫—Ü–∏–∏
- **min_price** - –º–∏–Ω–∏–º–∞–ª—å–Ω–∞—è —Ü–µ–Ω–∞
- **main_material** - –æ—Å–Ω–æ–≤–Ω–æ–π –º–∞—Ç–µ—Ä–∏–∞–ª

### –°–≤—è–∑–∏ (Relationships)

```python
product_type = relationship("ProductType", backref="products")
```
- **product_type** - —Å–≤—è–∑—å —Å –º–æ–¥–µ–ª—å—é ProductType
- **relationship** - –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç —Å–≤—è–∑—å "–º–Ω–æ–≥–∏–µ –∫ –æ–¥–Ω–æ–º—É" (–º–Ω–æ–≥–æ –ø—Ä–æ–¥—É–∫—Ç–æ–≤ ‚Üí –æ–¥–∏–Ω —Ç–∏–ø)
- **backref="products"** - –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–æ–∑–¥–∞–µ—Ç –æ–±—Ä–∞—Ç–Ω—É—é —Å–≤—è–∑—å –≤ ProductType
  - –¢–µ–ø–µ—Ä—å –º–æ–∂–Ω–æ –ø–æ–ª—É—á–∏—Ç—å –≤—Å–µ –ø—Ä–æ–¥—É–∫—Ç—ã —Ç–∏–ø–∞ —á–µ—Ä–µ–∑ `product_type.products`

```python
workshops = relationship("ProductWorkshop", back_populates="product", cascade="all, delete-orphan")
```
- **workshops** - —Å–≤—è–∑—å —Å –ø—Ä–æ–º–µ–∂—É—Ç–æ—á–Ω–æ–π —Ç–∞–±–ª–∏—Ü–µ–π ProductWorkshop
- **back_populates="product"** - –¥–≤—É—Å—Ç–æ—Ä–æ–Ω–Ω—è—è —Å–≤—è–∑—å (—è–≤–Ω–æ–µ —É–∫–∞–∑–∞–Ω–∏–µ)
- **cascade="all, delete-orphan"** - –ø—Ä–∏ —É–¥–∞–ª–µ–Ω–∏–∏ –ø—Ä–æ–¥—É–∫—Ç–∞ —É–¥–∞–ª—è—é—Ç—Å—è –≤—Å–µ —Å–≤—è–∑–∞–Ω–Ω—ã–µ –∑–∞–ø–∏—Å–∏

---

## üìÑ –§–∞–π–ª: `backend/app/models/product_workshop.py`

**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** SQLAlchemy –º–æ–¥–µ–ª—å –¥–ª—è –ø—Ä–æ–º–µ–∂—É—Ç–æ—á–Ω–æ–π —Ç–∞–±–ª–∏—Ü—ã `product_workshops` (—Å–≤—è–∑—å –ø—Ä–æ–¥—É–∫—Ü–∏–∏ –∏ —Ü–µ—Ö–æ–≤).

### –û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏ –º–æ–¥–µ–ª–∏

```python
class ProductWorkshop(Base):
    """–°–≤—è–∑—å –ø—Ä–æ–¥—É–∫—Ü–∏–∏ –∏ —Ü–µ—Ö–æ–≤"""
    __tablename__ = "product_workshops"
    
    id = Column(Integer, primary_key=True, index=True)
    product_id = Column(Integer, ForeignKey("products.id"), nullable=False)
    workshop_id = Column(Integer, ForeignKey("workshops.id"), nullable=False)
    production_time_hours = Column(Float, nullable=True)
```

**–ü–æ–ª—è:**
- **id** - –ø–µ—Ä–≤–∏—á–Ω—ã–π –∫–ª—é—á
- **product_id** - –≤–Ω–µ—à–Ω–∏–π –∫–ª—é—á –Ω–∞ —Ç–∞–±–ª–∏—Ü—É products
- **workshop_id** - –≤–Ω–µ—à–Ω–∏–π –∫–ª—é—á –Ω–∞ —Ç–∞–±–ª–∏—Ü—É workshops
- **production_time_hours** - –≤—Ä–µ–º—è –ø—Ä–æ–∏–∑–≤–æ–¥—Å—Ç–≤–∞ –≤ —á–∞—Å–∞—Ö

### –°–≤—è–∑–∏

```python
product = relationship("Product", back_populates="workshops")
workshop = relationship("Workshop", backref="product_workshops")
```
- **product** - —Å–≤—è–∑—å —Å Product (–º–Ω–æ–≥–∏–µ –∫ –æ–¥–Ω–æ–º—É)
- **workshop** - —Å–≤—è–∑—å —Å Workshop (–º–Ω–æ–≥–∏–µ –∫ –æ–¥–Ω–æ–º—É)
- **backref** - –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–æ–∑–¥–∞–µ—Ç –æ–±—Ä–∞—Ç–Ω—É—é —Å–≤—è–∑—å –≤ Workshop

### –£–Ω–∏–∫–∞–ª—å–Ω–æ–µ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ

```python
__table_args__ = (UniqueConstraint('product_id', 'workshop_id', name='unique_product_workshop'),)
```
- **__table_args__** - –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –∞—Ä–≥—É–º–µ–Ω—Ç—ã –¥–ª—è —Ç–∞–±–ª–∏—Ü—ã
- **UniqueConstraint** - –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ —É–Ω–∏–∫–∞–ª—å–Ω–æ—Å—Ç–∏
- **('product_id', 'workshop_id')** - –ø–∞—Ä–∞ –¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å —É–Ω–∏–∫–∞–ª—å–Ω–æ–π
- **name** - –∏–º—è –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è –≤ –ë–î

**–°–º—ã—Å–ª:** –û–¥–∏–Ω –ø—Ä–æ–¥—É–∫—Ç –Ω–µ –º–æ–∂–µ—Ç –±—ã—Ç—å —Å–≤—è–∑–∞–Ω —Å –æ–¥–Ω–∏–º —Ü–µ—Ö–æ–º –¥–≤–∞–∂–¥—ã.

---

## üìÑ –§–∞–π–ª: `backend/app/schemas/material_type.py`

**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** Pydantic —Å—Ö–µ–º—ã –¥–ª—è –≤–∞–ª–∏–¥–∞—Ü–∏–∏ –¥–∞–Ω–Ω—ã—Ö MaterialType.

### –ò–º–ø–æ—Ä—Ç—ã

```python
from pydantic import BaseModel
from typing import Optional
```
- **BaseModel** - –±–∞–∑–æ–≤—ã–π –∫–ª–∞—Å—Å Pydantic –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è —Å—Ö–µ–º
- **Optional** - —Ç–∏–ø –¥–ª—è –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω—ã—Ö –ø–æ–ª–µ–π

### –ë–∞–∑–æ–≤–∞—è —Å—Ö–µ–º–∞

```python
class MaterialTypeBase(BaseModel):
    """–ë–∞–∑–æ–≤–∞—è —Å—Ö–µ–º–∞ —Ç–∏–ø–∞ –º–∞—Ç–µ—Ä–∏–∞–ª–∞"""
    name: str
    loss_percentage: Optional[float] = None
```
- **MaterialTypeBase** - –±–∞–∑–æ–≤–∞—è —Å—Ö–µ–º–∞ —Å –æ–±—â–∏–º–∏ –ø–æ–ª—è–º–∏
- **name: str** - –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ–µ –ø–æ–ª–µ —Ç–∏–ø–∞ —Å—Ç—Ä–æ–∫–∞
- **loss_percentage: Optional[float] = None** - –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ–µ –ø–æ–ª–µ (–º–æ–∂–µ—Ç –±—ã—Ç—å None)

### –°—Ö–µ–º–∞ –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è

```python
class MaterialTypeCreate(MaterialTypeBase):
    """–°—Ö–µ–º–∞ –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è —Ç–∏–ø–∞ –º–∞—Ç–µ—Ä–∏–∞–ª–∞"""
    pass
```
- **MaterialTypeCreate** - –Ω–∞—Å–ª–µ–¥—É–µ—Ç—Å—è –æ—Ç MaterialTypeBase
- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è –≤–∞–ª–∏–¥–∞—Ü–∏–∏ –¥–∞–Ω–Ω—ã—Ö –ø—Ä–∏ POST –∑–∞–ø—Ä–æ—Å–∞—Ö
- **pass** - –Ω–∏—á–µ–≥–æ –Ω–µ –¥–æ–±–∞–≤–ª—è–µ—Ç, –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –ø–æ–ª—è –∏–∑ –±–∞–∑–æ–≤–æ–≥–æ –∫–ª–∞—Å—Å–∞

### –°—Ö–µ–º–∞ –¥–ª—è –æ—Ç–≤–µ—Ç–∞

```python
class MaterialTypeResponse(MaterialTypeBase):
    """–°—Ö–µ–º–∞ –æ—Ç–≤–µ—Ç–∞ —Å —Ç–∏–ø–æ–º –º–∞—Ç–µ—Ä–∏–∞–ª–∞"""
    id: int
    
    class Config:
        from_attributes = True
```
- **MaterialTypeResponse** - —Å—Ö–µ–º–∞ –¥–ª—è –æ—Ç–≤–µ—Ç–æ–≤ API
- **id: int** - –¥–æ–±–∞–≤–ª—è–µ—Ç –ø–æ–ª–µ id (–∫–æ—Ç–æ—Ä–æ–≥–æ –Ω–µ—Ç –≤ –±–∞–∑–æ–≤–æ–π —Å—Ö–µ–º–µ)
- **Config.from_attributes = True** - –ø–æ–∑–≤–æ–ª—è–µ—Ç —Å–æ–∑–¥–∞–≤–∞—Ç—å —Å—Ö–µ–º—É –∏–∑ SQLAlchemy –º–æ–¥–µ–ª–∏
  - –†–∞–Ω—å—à–µ –±—ã–ª–æ `orm_mode = True` –≤ —Å—Ç–∞—Ä—ã—Ö –≤–µ—Ä—Å–∏—è—Ö Pydantic

**–ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç:**
- –ü—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏: –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è MaterialTypeCreate (–±–µ–∑ id)
- –ü—Ä–∏ –æ—Ç–≤–µ—Ç–µ: –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è MaterialTypeResponse (—Å id)

---

## üìÑ –§–∞–π–ª: `backend/app/schemas/product_type.py`

**–°—Ç—Ä—É–∫—Ç—É—Ä–∞ –∞–Ω–∞–ª–æ–≥–∏—á–Ω–∞ material_type.py**

```python
class ProductTypeBase(BaseModel):
    name: str
    coefficient: Optional[float] = None

class ProductTypeCreate(ProductTypeBase):
    pass

class ProductTypeResponse(ProductTypeBase):
    id: int
    class Config:
        from_attributes = True
```

**–û—Ç–ª–∏—á–∏—è:** –ò—Å–ø–æ–ª—å–∑—É–µ—Ç `coefficient` –≤–º–µ—Å—Ç–æ `loss_percentage`

---

## üìÑ –§–∞–π–ª: `backend/app/schemas/workshop.py`

```python
class WorkshopBase(BaseModel):
    name: str
    workshop_type: Optional[str] = None
    staff_count: Optional[int] = None
```

**–ü–æ–ª—è:**
- **name** - –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ–µ
- **workshop_type** - –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ–µ
- **staff_count** - –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ–µ (—Ü–µ–ª–æ–µ —á–∏—Å–ª–æ)

---

## üìÑ –§–∞–π–ª: `backend/app/schemas/product.py`

```python
class ProductBase(BaseModel):
    name: str
    product_type_id: Optional[int] = None
    article: Optional[str] = None
    min_price: Optional[float] = None
    main_material: Optional[str] = None
```

**–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏:**
- **product_type_id** - —Å—Å—ã–ª–∫–∞ –Ω–∞ —Ç–∏–ø –ø—Ä–æ–¥—É–∫—Ü–∏–∏ (–º–æ–∂–µ—Ç –±—ã—Ç—å None)
- –í—Å–µ –ø–æ–ª—è –∫—Ä–æ–º–µ name –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–µ

---

## üìÑ –§–∞–π–ª: `backend/app/schemas/product_workshop.py`

```python
class ProductWorkshopBase(BaseModel):
    product_id: int
    workshop_id: int
    production_time_hours: Optional[float] = None
```

**–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏:**
- **product_id** –∏ **workshop_id** - –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ –ø–æ–ª—è (–Ω–µ Optional)
- –ù—É–∂–Ω—ã –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è —Å–≤—è–∑–∏ –º–µ–∂–¥—É –ø—Ä–æ–¥—É–∫—Ç–æ–º –∏ —Ü–µ—Ö–æ–º

---

## üìÑ –§–∞–π–ª: `backend/app/routers/material_type.py`

**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** API endpoints –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å —Ç–∏–ø–∞–º–∏ –º–∞—Ç–µ—Ä–∏–∞–ª–æ–≤.

### –ò–º–ø–æ—Ä—Ç—ã

```python
from fastapi import APIRouter, Depends, HTTPException
from sqlalchemy.orm import Session
from typing import List
```
- **APIRouter** - –∫–ª–∞—Å—Å –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è —Ä–æ—É—Ç–µ—Ä–∞
- **Depends** - –¥–ª—è dependency injection (–ø–æ–ª—É—á–µ–Ω–∏–µ —Å–µ—Å—Å–∏–∏ –ë–î)
- **HTTPException** - –¥–ª—è –≤–æ–∑–≤—Ä–∞—Ç–∞ HTTP –æ—à–∏–±–æ–∫
- **Session** - —Ç–∏–ø —Å–µ—Å—Å–∏–∏ SQLAlchemy
- **List** - —Ç–∏–ø –¥–ª—è —Å–ø–∏—Å–∫–æ–≤

```python
from app.database import get_db
from app.models.material_type import MaterialType
from app.schemas.material_type import MaterialTypeCreate, MaterialTypeResponse
```
- **get_db** - —Ñ—É–Ω–∫—Ü–∏—è –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è —Å–µ—Å—Å–∏–∏ –ë–î
- **MaterialType** - –º–æ–¥–µ–ª—å SQLAlchemy
- **MaterialTypeCreate, MaterialTypeResponse** - Pydantic —Å—Ö–µ–º—ã

### –°–æ–∑–¥–∞–Ω–∏–µ —Ä–æ—É—Ç–µ—Ä–∞

```python
router = APIRouter(prefix="/api/material-types", tags=["Material Types"])
```
- **APIRouter** - —Å–æ–∑–¥–∞–µ—Ç –Ω–æ–≤—ã–π —Ä–æ—É—Ç–µ—Ä
- **prefix="/api/material-types"** - –≤—Å–µ endpoints —ç—Ç–æ–≥–æ —Ä–æ—É—Ç–µ—Ä–∞ –±—É–¥—É—Ç –Ω–∞—á–∏–Ω–∞—Ç—å—Å—è —Å —ç—Ç–æ–≥–æ –ø—Ä–µ—Ñ–∏–∫—Å–∞
- **tags=["Material Types"]** - —Ç–µ–≥ –¥–ª—è –≥—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∏ –≤ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏ Swagger

### GET - –ü–æ–ª—É—á–∏—Ç—å –≤—Å–µ –∑–∞–ø–∏—Å–∏

```python
@router.get("/", response_model=List[MaterialTypeResponse])
def get_material_types(skip: int = 0, limit: int = 100, db: Session = Depends(get_db)):
    """–ü–æ–ª—É—á–∏—Ç—å —Å–ø–∏—Å–æ–∫ –≤—Å–µ—Ö —Ç–∏–ø–æ–≤ –º–∞—Ç–µ—Ä–∏–∞–ª–æ–≤"""
    material_types = db.query(MaterialType).offset(skip).limit(limit).all()
    return material_types
```

**–†–∞–∑–±–æ—Ä:**
- **@router.get("/")** - –¥–µ–∫–æ—Ä–∞—Ç–æ—Ä –¥–ª—è GET –∑–∞–ø—Ä–æ—Å–∞ –ø–æ –ø—É—Ç–∏ "/"
- **response_model** - —Å—Ö–µ–º–∞ –¥–ª—è –≤–∞–ª–∏–¥–∞—Ü–∏–∏ –æ—Ç–≤–µ—Ç–∞
- **skip: int = 0** - —Å–∫–æ–ª—å–∫–æ –∑–∞–ø–∏—Å–µ–π –ø—Ä–æ–ø—É—Å—Ç–∏—Ç—å (–¥–ª—è –ø–∞–≥–∏–Ω–∞—Ü–∏–∏)
- **limit: int = 100** - –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∑–∞–ø–∏—Å–µ–π
- **db: Session = Depends(get_db)** - dependency injection —Å–µ—Å—Å–∏–∏ –ë–î
- **db.query(MaterialType)** - –Ω–∞—á–∞–ª–æ SQL –∑–∞–ø—Ä–æ—Å–∞
- **.offset(skip)** - –ø—Ä–æ–ø—É—Å—Ç–∏—Ç—å N –∑–∞–ø–∏—Å–µ–π
- **.limit(limit)** - –æ–≥—Ä–∞–Ω–∏—á–∏—Ç—å –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ
- **.all()** - –≤—ã–ø–æ–ª–Ω–∏—Ç—å –∑–∞–ø—Ä–æ—Å –∏ –ø–æ–ª—É—á–∏—Ç—å –≤—Å–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã

**–ü—Ä–∏–º–µ—Ä –∑–∞–ø—Ä–æ—Å–∞:** `GET /api/material-types?skip=0&limit=10`

### GET - –ü–æ–ª—É—á–∏—Ç—å –∑–∞–ø–∏—Å—å –ø–æ ID

```python
@router.get("/{material_type_id}", response_model=MaterialTypeResponse)
def get_material_type(material_type_id: int, db: Session = Depends(get_db)):
    """–ü–æ–ª—É—á–∏—Ç—å —Ç–∏–ø –º–∞—Ç–µ—Ä–∏–∞–ª–∞ –ø–æ ID"""
    material_type = db.query(MaterialType).filter(MaterialType.id == material_type_id).first()
    if not material_type:
        raise HTTPException(status_code=404, detail="Material type not found")
    return material_type
```

**–†–∞–∑–±–æ—Ä:**
- **{material_type_id}** - –ø–∞—Ä–∞–º–µ—Ç—Ä –ø—É—Ç–∏ (path parameter)
- **material_type_id: int** - –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–µ–æ–±—Ä–∞–∑—É–µ—Ç—Å—è –≤ int
- **.filter(MaterialType.id == material_type_id)** - —É—Å–ª–æ–≤–∏–µ WHERE
- **.first()** - –ø–æ–ª—É—á–∏—Ç—å –ø–µ—Ä–≤—É—é –∑–∞–ø–∏—Å—å (–∏–ª–∏ None)
- **if not material_type** - –ø—Ä–æ–≤–µ—Ä–∫–∞ —Å—É—â–µ—Å—Ç–≤–æ–≤–∞–Ω–∏—è
- **HTTPException** - –≤–æ–∑–≤—Ä–∞—Ç –æ—à–∏–±–∫–∏ 404 –µ—Å–ª–∏ –Ω–µ –Ω–∞–π–¥–µ–Ω–æ

**–ü—Ä–∏–º–µ—Ä –∑–∞–ø—Ä–æ—Å–∞:** `GET /api/material-types/1`

### POST - –°–æ–∑–¥–∞—Ç—å –Ω–æ–≤—É—é –∑–∞–ø–∏—Å—å

```python
@router.post("/", response_model=MaterialTypeResponse, status_code=201)
def create_material_type(material_type: MaterialTypeCreate, db: Session = Depends(get_db)):
    """–°–æ–∑–¥–∞—Ç—å –Ω–æ–≤—ã–π —Ç–∏–ø –º–∞—Ç–µ—Ä–∏–∞–ª–∞"""
    # –ü—Ä–æ–≤–µ—Ä—è–µ–º, —Å—É—â–µ—Å—Ç–≤—É–µ—Ç –ª–∏ —É–∂–µ —Ç–∞–∫–æ–π —Ç–∏–ø –º–∞—Ç–µ—Ä–∏–∞–ª–∞
    existing = db.query(MaterialType).filter(MaterialType.name == material_type.name).first()
    if existing:
        raise HTTPException(status_code=400, detail="Material type with this name already exists")
    
    db_material_type = MaterialType(**material_type.model_dump())
    db.add(db_material_type)
    db.commit()
    db.refresh(db_material_type)
    return db_material_type
```

**–†–∞–∑–±–æ—Ä:**
- **@router.post("/")** - POST –∑–∞–ø—Ä–æ—Å
- **status_code=201** - –∫–æ–¥ –æ—Ç–≤–µ—Ç–∞ "Created"
- **material_type: MaterialTypeCreate** - –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –≤–∞–ª–∏–¥–∞—Ü–∏—è —á–µ—Ä–µ–∑ Pydantic
- **existing = ...** - –ø—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞ –¥—É–±–ª–∏–∫–∞—Ç –ø–æ –∏–º–µ–Ω–∏
- **HTTPException(400)** - –æ—à–∏–±–∫–∞ "Bad Request" –µ—Å–ª–∏ –¥—É–±–ª–∏–∫–∞—Ç
- **MaterialType(**material_type.model_dump())** - —Å–æ–∑–¥–∞–Ω–∏–µ –º–æ–¥–µ–ª–∏ –∏–∑ —Å—Ö–µ–º—ã
  - **model_dump()** - –ø—Ä–µ–æ–±—Ä–∞–∑—É–µ—Ç Pydantic –º–æ–¥–µ–ª—å –≤ —Å–ª–æ–≤–∞—Ä—å
  - **** - —Ä–∞—Å–ø–∞–∫–æ–≤–∫–∞ —Å–ª–æ–≤–∞—Ä—è –≤ –∞—Ä–≥—É–º–µ–Ω—Ç—ã –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä–∞
- **db.add()** - –¥–æ–±–∞–≤–∏—Ç—å –≤ —Å–µ—Å—Å–∏—é (–Ω–æ –µ—â–µ –Ω–µ –≤ –ë–î)
- **db.commit()** - —Å–æ—Ö—Ä–∞–Ω–∏—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏—è –≤ –ë–î
- **db.refresh()** - –æ–±–Ω–æ–≤–∏—Ç—å –æ–±—ä–µ–∫—Ç –∏–∑ –ë–î (–ø–æ–ª—É—á–∏—Ç—å —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–π ID)

**–ü—Ä–∏–º–µ—Ä –∑–∞–ø—Ä–æ—Å–∞:** `POST /api/material-types` —Å —Ç–µ–ª–æ–º:
```json
{
  "name": "–î–µ—Ä–µ–≤–æ",
  "loss_percentage": 5.0
}
```

---

## üìÑ –§–∞–π–ª: `backend/app/routers/product_type.py`

**–°—Ç—Ä—É–∫—Ç—É—Ä–∞ –∞–Ω–∞–ª–æ–≥–∏—á–Ω–∞ material_type.py**

–û—Ç–ª–∏—á–∏—è:
- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç –º–æ–¥–µ–ª—å ProductType
- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç —Å—Ö–µ–º—ã ProductTypeCreate/ProductTypeResponse
- –ü—Ä–µ—Ñ–∏–∫—Å: `/api/product-types`

---

## üìÑ –§–∞–π–ª: `backend/app/routers/workshop.py`

**–°—Ç—Ä—É–∫—Ç—É—Ä–∞ –∞–Ω–∞–ª–æ–≥–∏—á–Ω–∞ material_type.py**

–û—Ç–ª–∏—á–∏—è:
- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç –º–æ–¥–µ–ª—å Workshop
- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç —Å—Ö–µ–º—ã WorkshopCreate/WorkshopResponse
- –ü—Ä–µ—Ñ–∏–∫—Å: `/api/workshops`

---

## üìÑ –§–∞–π–ª: `backend/app/routers/product.py`

**–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏:** –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –≤–Ω–µ—à–Ω–µ–≥–æ –∫–ª—é—á–∞

```python
@router.post("/", response_model=ProductResponse, status_code=201)
def create_product(product: ProductCreate, db: Session = Depends(get_db)):
    """–°–æ–∑–¥–∞—Ç—å –Ω–æ–≤—É—é –ø—Ä–æ–¥—É–∫—Ü–∏—é"""
    # –ü—Ä–æ–≤–µ—Ä—è–µ–º, —Å—É—â–µ—Å—Ç–≤—É–µ—Ç –ª–∏ —É–∫–∞–∑–∞–Ω–Ω—ã–π —Ç–∏–ø –ø—Ä–æ–¥—É–∫—Ü–∏–∏
    if product.product_type_id:
        product_type = db.query(ProductType).filter(ProductType.id == product.product_type_id).first()
        if not product_type:
            raise HTTPException(status_code=400, detail="Product type not found")
    
    db_product = Product(**product.model_dump())
    db.add(db_product)
    db.commit()
    db.refresh(db_product)
    return db_product
```

**–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –ª–æ–≥–∏–∫–∞:**
- **if product.product_type_id:** - –ø—Ä–æ–≤–µ—Ä—è–µ–º, —É–∫–∞–∑–∞–Ω –ª–∏ —Ç–∏–ø –ø—Ä–æ–¥—É–∫—Ü–∏–∏
- –ï—Å–ª–∏ —É–∫–∞–∑–∞–Ω, –ø—Ä–æ–≤–µ—Ä—è–µ–º –µ–≥–æ —Å—É—â–µ—Å—Ç–≤–æ–≤–∞–Ω–∏–µ –≤ –ë–î
- –ï—Å–ª–∏ –Ω–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç - –≤–æ–∑–≤—Ä–∞—â–∞–µ–º –æ—à–∏–±–∫—É 400

**–ó–∞—á–µ–º:** –ó–∞—â–∏—Ç–∞ –æ—Ç —Å–æ–∑–¥–∞–Ω–∏—è –ø—Ä–æ–¥—É–∫—Ç–∞ —Å –Ω–µ—Å—É—â–µ—Å—Ç–≤—É—é—â–∏–º —Ç–∏–ø–æ–º –ø—Ä–æ–¥—É–∫—Ü–∏–∏.

---

## üìÑ –§–∞–π–ª: `backend/app/routers/product_workshop.py`

**–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏:** –ú–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ –ø—Ä–æ–≤–µ—Ä–∫–∏

```python
@router.post("/", response_model=ProductWorkshopResponse, status_code=201)
def create_product_workshop(product_workshop: ProductWorkshopCreate, db: Session = Depends(get_db)):
    """–°–æ–∑–¥–∞—Ç—å –Ω–æ–≤—É—é —Å–≤—è–∑—å –ø—Ä–æ–¥—É–∫—Ü–∏–∏ –∏ —Ü–µ—Ö–∞"""
    # –ü—Ä–æ–≤–µ—Ä—è–µ–º, —Å—É—â–µ—Å—Ç–≤—É–µ—Ç –ª–∏ –ø—Ä–æ–¥—É–∫—Ü–∏—è
    product = db.query(Product).filter(Product.id == product_workshop.product_id).first()
    if not product:
        raise HTTPException(status_code=400, detail="Product not found")
    
    # –ü—Ä–æ–≤–µ—Ä—è–µ–º, —Å—É—â–µ—Å—Ç–≤—É–µ—Ç –ª–∏ —Ü–µ—Ö
    workshop = db.query(Workshop).filter(Workshop.id == product_workshop.workshop_id).first()
    if not workshop:
        raise HTTPException(status_code=400, detail="Workshop not found")
    
    # –ü—Ä–æ–≤–µ—Ä—è–µ–º, –Ω–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç –ª–∏ —É–∂–µ —Ç–∞–∫–∞—è —Å–≤—è–∑—å
    existing = db.query(ProductWorkshop).filter(
        ProductWorkshop.product_id == product_workshop.product_id,
        ProductWorkshop.workshop_id == product_workshop.workshop_id
    ).first()
    if existing:
        raise HTTPException(status_code=400, detail="Product workshop relationship already exists")
    
    db_product_workshop = ProductWorkshop(**product_workshop.model_dump())
    db.add(db_product_workshop)
    db.commit()
    db.refresh(db_product_workshop)
    return db_product_workshop
```

**–ü—Ä–æ–≤–µ—Ä–∫–∏:**
1. –°—É—â–µ—Å—Ç–≤–æ–≤–∞–Ω–∏–µ –ø—Ä–æ–¥—É–∫—Ç–∞
2. –°—É—â–µ—Å—Ç–≤–æ–≤–∞–Ω–∏–µ —Ü–µ—Ö–∞
3. –£–Ω–∏–∫–∞–ª—å–Ω–æ—Å—Ç—å –ø–∞—Ä—ã (product_id, workshop_id)

**–ó–∞—á–µ–º:** –û–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç —Ü–µ–ª–æ—Å—Ç–Ω–æ—Å—Ç—å –¥–∞–Ω–Ω—ã—Ö –∏ –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–∞–µ—Ç –¥—É–±–ª–∏–∫–∞—Ç—ã.

---

## üìÑ –§–∞–π–ª: `backend/run.py`

**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –°–∫—Ä–∏–ø—Ç –¥–ª—è –∑–∞–ø—É—Å–∫–∞ —Å–µ—Ä–≤–µ—Ä–∞ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏.

### –ò–º–ø–æ—Ä—Ç—ã

```python
import uvicorn
from app.config import settings
```
- **uvicorn** - ASGI —Å–µ—Ä–≤–µ—Ä –¥–ª—è –∑–∞–ø—É—Å–∫–∞ FastAPI
- **settings** - –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è

### –ó–∞–ø—É—Å–∫ —Å–µ—Ä–≤–µ—Ä–∞

```python
if __name__ == "__main__":
    print("=" * 60)
    print("üöÄ –ó–∞–ø—É—Å–∫ Production Management API")
    print("=" * 60)
    print(f"üì° –°–µ—Ä–≤–µ—Ä –∑–∞–ø—É—â–µ–Ω –Ω–∞: http://localhost:{settings.PORT}")
    print(f"üìö –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è API: http://localhost:{settings.PORT}/docs")
    print(f"üìñ ReDoc: http://localhost:{settings.PORT}/redoc")
    print("=" * 60)
    print("–ù–∞–∂–º–∏—Ç–µ CTRL+C –¥–ª—è –æ—Å—Ç–∞–Ω–æ–≤–∫–∏ —Å–µ—Ä–≤–µ—Ä–∞")
    print("=" * 60)
    
    uvicorn.run(
        "app.main:app",
        host="127.0.0.1",
        port=settings.PORT,
        reload=True
    )
```

**–†–∞–∑–±–æ—Ä:**
- **if __name__ == "__main__"** - –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –ø—Ä–∏ –ø—Ä—è–º–æ–º –∑–∞–ø—É—Å–∫–µ —Ñ–∞–π–ª–∞
- **print()** - –≤—ã–≤–æ–¥ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ –∑–∞–ø—É—Å–∫–µ
- **uvicorn.run()** - –∑–∞–ø—É—Å–∫ —Å–µ—Ä–≤–µ—Ä–∞
  - **"app.main:app"** - –ø—É—Ç—å –∫ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—é (–º–æ–¥—É–ª—å:–ø–µ—Ä–µ–º–µ–Ω–Ω–∞—è)
  - **host="127.0.0.1"** - –∞–¥—Ä–µ—Å (localhost)
  - **port=settings.PORT** - –ø–æ—Ä—Ç –∏–∑ –Ω–∞—Å—Ç—Ä–æ–µ–∫ (8000)
  - **reload=True** - –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–∞ –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ –∫–æ–¥–∞

**–ö–∞–∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å:**
```bash
python run.py
```

---

## üîÑ –ö–∞–∫ –≤—Å–µ —Ä–∞–±–æ—Ç–∞–µ—Ç –≤–º–µ—Å—Ç–µ

### –ü—Ä–∏–º–µ—Ä: –°–æ–∑–¥–∞–Ω–∏–µ –Ω–æ–≤–æ–≥–æ —Ç–∏–ø–∞ –º–∞—Ç–µ—Ä–∏–∞–ª–∞

1. **–ö–ª–∏–µ–Ω—Ç –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç POST –∑–∞–ø—Ä–æ—Å:**
   ```
   POST /api/material-types
   Body: {"name": "–î–µ—Ä–µ–≤–æ", "loss_percentage": 5.0}
   ```

2. **FastAPI –ø–æ–ª—É—á–∞–µ—Ç –∑–∞–ø—Ä–æ—Å:**
   - –û–ø—Ä–µ–¥–µ–ª—è–µ—Ç —Ä–æ—É—Ç–µ—Ä –ø–æ –ø—Ä–µ—Ñ–∏–∫—Å—É `/api/material-types`
   - –ù–∞—Ö–æ–¥–∏—Ç —Ñ—É–Ω–∫—Ü–∏—é `create_material_type`

3. **–í–∞–ª–∏–¥–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö:**
   - Pydantic –ø—Ä–æ–≤–µ—Ä—è–µ—Ç –¥–∞–Ω–Ω—ã–µ —á–µ—Ä–µ–∑ `MaterialTypeCreate`
   - –ï—Å–ª–∏ –¥–∞–Ω–Ω—ã–µ –Ω–µ–≤–µ—Ä–Ω—ã - –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –æ—à–∏–±–∫—É 422

4. **Dependency Injection:**
   - –í—ã–∑—ã–≤–∞–µ—Ç—Å—è `get_db()` –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è —Å–µ—Å—Å–∏–∏ –ë–î
   - –°–æ–∑–¥–∞–µ—Ç—Å—è –Ω–æ–≤–∞—è —Å–µ—Å—Å–∏—è

5. **–ë–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞:**
   - –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞ –¥—É–±–ª–∏–∫–∞—Ç
   - –°–æ–∑–¥–∞–Ω–∏–µ –º–æ–¥–µ–ª–∏ `MaterialType`
   - –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –≤ –ë–î —á–µ—Ä–µ–∑ `db.add()` –∏ `db.commit()`

6. **–û—Ç–≤–µ—Ç:**
   - –î–∞–Ω–Ω—ã–µ –ø—Ä–µ–æ–±—Ä–∞–∑—É—é—Ç—Å—è —á–µ—Ä–µ–∑ `MaterialTypeResponse`
   - –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç—Å—è JSON —Å —Å–æ–∑–¥–∞–Ω–Ω–æ–π –∑–∞–ø–∏—Å—å—é (–≤–∫–ª—é—á–∞—è ID)

7. **–û—á–∏—Å—Ç–∫–∞:**
   - –°–µ—Å—Å–∏—è –ë–î –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∑–∞–∫—Ä—ã–≤–∞–µ—Ç—Å—è —á–µ—Ä–µ–∑ `finally` –≤ `get_db()`

---

## üìù –ò—Ç–æ–≥–æ–≤–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –¥–∞–Ω–Ω—ã—Ö

### –ü–æ—Ç–æ–∫ –¥–∞–Ω–Ω—ã—Ö:

```
HTTP Request
    ‚Üì
FastAPI Router
    ‚Üì
Pydantic Schema (–≤–∞–ª–∏–¥–∞—Ü–∏—è)
    ‚Üì
SQLAlchemy Model
    ‚Üì
Database
    ‚Üì
SQLAlchemy Model
    ‚Üì
Pydantic Schema (—Å–µ—Ä–∏–∞–ª–∏–∑–∞—Ü–∏—è)
    ‚Üì
HTTP Response
```

### –†–∞–∑–¥–µ–ª–µ–Ω–∏–µ –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç–∏:

- **Models** - —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –¥–∞–Ω–Ω—ã—Ö –≤ –ë–î
- **Schemas** - –≤–∞–ª–∏–¥–∞—Ü–∏—è –∏ —Å–µ—Ä–∏–∞–ª–∏–∑–∞—Ü–∏—è
- **Routers** - –æ–±—Ä–∞–±–æ—Ç–∫–∞ HTTP –∑–∞–ø—Ä–æ—Å–æ–≤
- **Database** - —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ–º

---

## ‚úÖ –ö–ª—é—á–µ–≤—ã–µ –∫–æ–Ω—Ü–µ–ø—Ü–∏–∏

### 1. Dependency Injection
- FastAPI –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–µ—Ä–µ–¥–∞–µ—Ç –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ (–Ω–∞–ø—Ä–∏–º–µ—Ä, —Å–µ—Å—Å–∏—é –ë–î)
- –£–ø—Ä–æ—â–∞–µ—Ç —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ä–µ—Å—É—Ä—Å–∞–º–∏

### 2. –í–∞–ª–∏–¥–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö
- Pydantic –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –≤–∞–ª–∏–¥–∏—Ä—É–µ—Ç –≤—Ö–æ–¥—è—â–∏–µ –¥–∞–Ω–Ω—ã–µ
- –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç –ø–æ–Ω—è—Ç–Ω—ã–µ –æ—à–∏–±–∫–∏ –ø—Ä–∏ –Ω–µ–≤–µ—Ä–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö

### 3. ORM (Object-Relational Mapping)
- SQLAlchemy –ø–æ–∑–≤–æ–ª—è–µ—Ç —Ä–∞–±–æ—Ç–∞—Ç—å —Å –ë–î —á–µ—Ä–µ–∑ Python –æ–±—ä–µ–∫—Ç—ã
- –ù–µ –Ω—É–∂–Ω–æ –ø–∏—Å–∞—Ç—å SQL –∑–∞–ø—Ä–æ—Å—ã –≤—Ä—É—á–Ω—É—é

### 4. REST API
- –°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–µ HTTP –º–µ—Ç–æ–¥—ã (GET, POST)
- –ü—Ä–µ–¥—Å–∫–∞–∑—É–µ–º—ã–µ URL —Å—Ç—Ä—É–∫—Ç—É—Ä—ã
- –°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–µ –∫–æ–¥—ã –æ—Ç–≤–µ—Ç–æ–≤

---

**–î–æ–∫—É–º–µ–Ω—Ç —Å–æ–∑–¥–∞–Ω –¥–ª—è –ø–æ–Ω–∏–º–∞–Ω–∏—è —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –∏ —Ä–∞–±–æ—Ç—ã –∫–æ–¥–∞ –ø—Ä–æ–µ–∫—Ç–∞.**

